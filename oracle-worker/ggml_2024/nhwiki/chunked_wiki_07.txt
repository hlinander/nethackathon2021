
===Items===
* Upon completion, check under unmoved boulders for useful items.
* The first level contains two guaranteed scrolls of earth; remember to #[[name]] them as such as soon as you find them. Some monsters will read scrolls of earth, especially [[nymph]]s that can pluck the scroll from your inventory; however, most monsters only have a 10% chance to do so unless they have a hard helm on.
* Sokoban is an excellent place to stock up on comestibles and other loot. If you are dealing with [[encumbrance]] issues or otherwise trying to manage your inventory, simply leave the food items on the floor and eat them only when you need to. On the other hand, grab every scroll and wand you see; at the least, doing so means a monster will not be able to pick them up and use them to your disadvantage.
** Items can sometimes be generated over holes. Pushing a boulder over the hole will bury the item. If you wish to retrieve the item instead, you may:
*** Kick the item away; it will usually fall down another hole and appear somewhere on the level below. This will destroy the item if it is fragile, and on the top level will wake the monsters in the zoo.
*** Repeatedly step on the space containing the item; it will eventually fall down with you, although not necessarily onto your space. This will never break the item.
*** Turn on [[autopickup]] and step on the space containing the item; you will pick it up before you fall. Beware of [[loadstone]]s, both over the hole and on the levels below. You can use [[pickup_types]] or [[autopickup exception]] to limit yourself to only picking up the type of item you are trying to grab.
*** Use a grappling hook.
** Monsters can attack you with the guaranteed [[wand]] if applicable. If you have not already found it, be careful clearing the [[zoo]], e.g. send your [[pet]] in without entering line of fire.
* If you reach the end of the branch and do not see the prize, it is probable that some {{white|@}} found the amulet of reflection and picked it up. Be sure to claim the amulet immediately after killing said monster, since you don't want your new amulet of reflection to become a snack for a [[rust monster]] or [[rock mole]]. Nothing will ever pick up the bag of holding, however.

===Stash location===
The first level of Sokoban, once completed, is often used as a [[stash]] level, for several reasons:
* It is one of the locations which the [[Eye of the Aethiopica]] can teleport you to instantly.
* It is conveniently located one level from the [[Oracle]], 2-8 levels from the [[Gnomish Mines]], and located in the top half of the [[Dungeons of Doom]], where shops and altars are likely.
* It is relatively free of monsters, and a spawning ground for baby monsters rather than their larger versions.
* There are spare boulders which can be used to further block off a [[safe area]].
* There is a long corridor which can be used for [[polypiling]].
* If there is an [[altar]] nearby, Sokoban can be used to control your [[Luck]] and avoid [[crowning]] during altar farming.

==Out-of-game practice==
[http://github.com/hackedhead/nhss nhss] (originally by IanK of [http://iank.org/ iank.org]) is a C/terminal tool that sets up a nethack-like environment (basic movement and boulder pushing only) that can be used to figure a level out before actually playing it, thus reducing the chances of rendering a level unsolvable. It can also record sessions and play them back step by step.

An unaffiliated online version, also called NHSS, is available [http://nhss.twonegatives.com/ here].

Unaffiliated but related to nhss, [http://www.electricmonk.nl/Miscellaneous/Nethack Nethack's Sokoban levels for various Sokoban implementations] (XSok, Sokoban++, YSokoban, Universal Sokoban format and Games 4 Brains Sokoban format) which you can use to practice the levels in other Sokoban games.

Even more unaffiliated with any of the above, [http://joshua.tejat.net/private/public/nh-soko.zip Nethack's Sokoban levels] for [http://www.nongnu.org/enigma/ Enigma].

A [https://nethackathon.org/annotate web app] by disperse also allows you flip the levels for practice with the level flipping introduced in [[NetHack 3.7.0]], and records user solutions.

==Variants==
Most variants attempt to improve upon the Sokoban experience. 

===Level flipping===
In [[SporkHack]] and [[UnNetHack]], the [https://bilious.alt.org/?254 level-flipping patch] is applied to Sokoban.

===Magic chests===
Variants that contain [[magic chest]]s place one at the beginning or end of Sokoban to aid players who use it as a stash level.

===SLASH'EM===
{{main|Sokoban (SLASH'EM)}}
In [[SLASH'EM]], there are 15 new level variants, but otherwise Sokoban is the same as vanilla ''NetHack'', with a 50% chance of either a bag of holding or an amulet of reflection at the end. Given that ordinary [[sack]]s and [[oilskin sack]]s can be upgraded to a bag of holding in SLASH'EM, the amulet is typically the more desirable prize.

The [[Doppelganger (starting race)|doppelganger]] can [[liquid leap]] through the bars on the Sokoban levels, although they cannot be traversed by other means (e.g., as a [[snake]]), and this will still induce a Luck penalty.

Several public server versions of SLASH'EM include a patch adding the [[acid hound]], which corrodes the floor to create pits when killed; these can be very troublesome if they appear in Sokoban, as they may make solving the level without using a scroll of earth impossible.

===UnNetHack===
{{main|Sokoban (UnNetHack)}}
UnNetHack introduces new Sokoban levels as well, and additionally shortens the branch to three levels&mdash;the vanilla maps for levels one and two may all be used to create level one.

From UnNetHack 4.1.1 onwards, cheating in Sokoban does not incur a Luck penalty. Instead, solving Sokoban without cheating is tracked as a new [[conduct]]. However, to compensate, the scrolls of earth typically found on the first level are not guaranteed. Since UnNetHack 6, solving Sokoban without cheating increases your Luck by 1 point.

The final level always has a [[bag of holding]], a cloak of {{of|cloak|magic resistance|or=1|displacement}}, and an amulet of {{of|amulet|reflection|life saving|or=1|flying}}. When one of these objects is picked up, the other two are destroyed. If any of these items are in direct line of sight, they are temporarily and partially identified, allowing for a more informed decision.

===NetHack Fourk===
{{main|Sokoban (NetHack Fourk)}}
Fourk contains quite a few changes to ameliorate players' common frustrations in Sokoban; this list may not be complete:
* If a peaceful monster would spawn in Sokoban, it is generated hostile instead. Thus, it is safe to kill unknown monsters that are blocking your boulder movements.
* Sokoban luck penalties can only bring your luck as low as -3; any further "cheating" is ignored.
* Luck penalties do not apply when you have a non-cursed [[luckstone]].
* Luck penalties do not apply when you are hallucinating, but a boulder will hit you for 1d12 damage.
* There are a number of additional Sokoban levels. Player feedback suggests that these are on average easier than the vanilla levels.
* Two of the new Sokoban endings have a sack which contains rings of [[teleport control]] and [[polymorph control]] and a random ring, instead of the usual prize. If you already have either of those rings, you might receive other jewellery.
* In the other Soko endings, if you already have reflection, the Soko prize will not be an amulet of reflection. If you already have a bag of holding, the prize is likely to be an amulet of reflection. In either case or if you have both items, the prize might be a simple [[oilskin sack]].
* To help pacifists, completing Sokoban without cheating grants one [[experience level]].
* To make Sokoban more skippable, [[Perseus]]'s statue always contains the shield and the sack.

===NetHack brass===
[[NetHack brass]] does not change or add any Sokoban levels, but instead has a choice between the amulet of reflection, a cloak of magic resistance, and a bag of holding as the prize item. All [[monster]]s will avoid stepping on or touching the items, preventing abuse via using pets to retrieve unchosen prizes.

Non-[[artifact]] items that provide [[magic resistance]] or [[reflection]] can wear out and disintegratefrom resisting or reflecting enough times, making it a good idea to carry a spare source. The bag remains a good choice if you already have "permanent" and/or redundant options for both properties.

===GruntHack===
:{{main|Sokoban (GruntHack)}}
[[GruntHack]] adds some new Sokoban levels, and offers a choice between the amulet of reflection, a cloak of magic resistance, and a bag of holding as the prize item, similar to NetHack brass. The prize closet doors are impenetrable and cannot be destroyed, e.g. with a wand or a spell, and once one of them is opened, the others will seal; a means of identifying the closet containing your item of choice, such as a [[potion of object detection]], is recommended.

===EvilHack===
{{main|Sokoban (EvilHack)}}
In [[EvilHack]], several levels from other variants such as SLASH'EM, GruntHack and UnNetHack are added. On the final level, all three closets in the Sokoban zoo have a prize behind each door, but you will not be able to tell exactly what that prize is until you pick it up - you can learn the object type of the prize behind each door via some form of item detection, e.g. [[quaff]]ing a potion of object detection or reading a non-cursed [[scroll of magic detection]]. Like GruntHack, the doors are made impenetrable to prevent taking more than one prize: once one door is opened, the other two doors disappear and are replaced with a sealed wall, and when you touch one of the prizes, the other two will magically disappear. Despite this, the doors can still be broken, e.g. by a giant.

There are two different items that can spawn behind each door, with a 50% chance for each item. Those items are:

* Sokoban prize armor &ndash; [[gauntlets of protection]] or a [[helm of speed]]
* Sokoban prize amulet &ndash; an amulet of reflection or an [[amulet of magic resistance]]
* Sokoban prize tool &ndash; a bag of holding or a [[magic marker]]

Since magic markers do not generate randomly, Sokoban is potentially one of only two sources in the game where a marker can be found - the [[high priest of Moloch]] in the [[Sanctum]] has the only other possible magic marker.

===DynaHack===
{{main|Sokoban (DynaHack)}}
Sokoban in [[DynaHack]] is similar to UnNetHack, with three floors and maps from both UnNetHack and SLASH'EM among others. The prizes are the same as in UnNetHack, but have been moved to [[Mines' End]], making the Sokoban branch more optional; the random rings and wands that are normally scattered in Sokoban are instead placed within a [[sack]] on Sokoban's final level.

===FIQHack===
In [[FIQHack]], all pits in Sokoban are converted to holes.

If a peaceful monster would spawn in Sokoban, it is generated hostile instead; unicorns are also excluded from spawning in Sokoban to avoid creating scenarios where you must risk a major Luck penalty, so you can safely kill unknown monsters blocking your boulder movements.

===SpliceHack===
[[SpliceHack]] adds a few new levels from other variants; for those that have an equal number of pits/holes and boulders, a hole or pit is removed in order to create a spare boulder and make them less difficult.

Levels 2a and 2b replace the boulders with [[gas spores]], [[flaming spheres]], and other slow, explosive floating monsters.

==Trivia==
*The presence of three doors in the treasure zoo, with a prize behind one of them, is probably a reference to the [[wikipedia:Monty Hall Problem|Monty Hall Problem]].

==Encyclopedia entry==

{{encyclopedia|
Sokoban (Japanese for "warehouse keeper") is a transport puzzle
in which the player pushes boxes around a maze, viewed from
above, and tries to put them in designated locations.  Only one
box may be pushed at a time, not two, and boxes cannot be pulled.
As the puzzle would be extremely difficult to create physically,
it is usually implemented as a video game.

Sokoban was created in 1982 by Hiroyuki Imabayashi, and was
published by Thinking Rabbit, a software house based in
Takarazuka, Japan.  Thinking Rabbit also released three sequels:
Boxxle, Sokoban Perfect and Sokoban Revenge.
|[ Wikipedia, the free encyclopedia ]
}}

==External links==
* [https://web.archive.org/web/20200131120459/http://www.erimsever.com:80/sokoban.htm Sokoban Erim via Wayback Archive - a comprehensive collection of Sokoban resources]

==References==
<references/>

{{nethack-364|offset=3}}
{{slashem-7E7|offset=2}}
{{variant-343|offset=1}}
{{featured}}
[[Category:Sokoban| ]]}
&&%s&& %s Item {136884 2021-01-09T18:33:15Z {4001476 Infinigon} /* Item categories */ sort in inventory order, add venoms An '''item''' is any carriable object to be found in the [[dungeon]]. All items can be placed in your inventory, assuming they are not [[Weight|too heavy]] for you to pick up, and they appear there under a number of categories, listed below. An '''object''' is a stack of one or more identical items that can be stored in a single inventory slot (though sometimes the term 'item' is erroneously used to refer to an object).

If the weight of the items you are carrying becomes too much then you become [[Encumbrance|encumbered]]. Items can be [[BUC|blessed, uncursed or cursed]], which affects their properties. Some have charges, and can be charged, most can be destroyed, some are generated randomly, and some are unique.

Many objects can pile up on top of each other on one [[square]], but only the symbol of the top one is shown.

== Item categories ==

<!-- The below list follows the inventory sort order of NetHack 3.6.6 -->

* {{yellow|$}} &ndash; [[Zorkmid|Coins]]
* {{cyan|"}} &ndash; [[Amulet|Amulets]]
* {{brown|)}} &ndash; [[Weapon|Weapons]]
* {{cyan|[}} &ndash; [[Armor]]
* {{brown|%}} &ndash; [[Comestible|Comestibles]]
* {{white|?}} &ndash; [[Scroll|Scrolls]]
* {{magenta|+}} &ndash; [[Spellbook|Spellbooks]]
* {{green|!}} &ndash; [[Potion|Potions]]
* {{red|<nowiki>=</nowiki>}} &ndash; [[Ring|Rings]]
* {{yellow|/}} &ndash; [[Wand|Wands]]
* {{brown|(}} &ndash; [[Tool|Tools]]
* {{lightgray|*}} &ndash; [[Gem|Gems]]/[[Stone|Stones]]
* {{white|`}} &ndash; [[Boulder|Boulders]]/[[Statue|Statues]]
* {{cyan|0}} &ndash; [[Heavy iron ball|Iron balls]]
* {{cyan|_}} &ndash; [[Iron chain|Chains]]
* {{brown|.}} &ndash; [[Venom|Venoms]]

[[Dungeon feature]]s fixed to the floor, such as [[altar]]s, [[fountain]]s, and [[sink]]s, are distinct from items.

== Item generation ==

Items can be randomly found on the floor and in containers. An item is occasionally generated as a [[death drop]] when [[you]] kill a monster and it leaves a corpse. The probabilities below govern the generation of such random items, which varies depending on where they are generated:

{|class="wikitable"
!Item class
!Normal dungeon
!Inside [[container]]s
![[Rogue level]]
![[Gehennom]]
|-
|[[Weapons]]
|10%
|0%
|12%
|20%
|-
|[[Armor]]
|10%
|0%
|12%
|20%
|-
|[[Comestibles]]
|20%
|15%
|22%
|16%
|-
|[[Tool]]s
|8%
|0%
|0%
|12%
|-
|[[Potion]]s
|16%
|18%
|22%
|1%
|-
|[[Scroll]]s
|16%
|18%
|22%
|1%
|-
|[[Spellbook]]s
|4%
|12%
|0%
|0%
|-
|[[Wand]]s
|4%
|6%
|5%
|8%
|-
|[[Ring]]s
|3%
|5%
|5%
|8%
|-
|[[Amulet]]s
|1%
|1%
|0%
|4%
|-
|[[Gem]]s
|8%
|18%
|0%
|10%
|-
|Total
|100%
|93%
|100%
|100%
|-
|}

The other 7% of objects generated inside containers will be piles of gold.

In addition, some levels specify extra randomly-generated items: for example, each level of the [[Gnomish Mines]] contains at least one tool, and each [[Sokoban]] level contains a ring and a wand. [[Monster]]s can also be generated with items in their [[Monster starting inventory|inventory]].

[[Category:Items| ]]
{{nethack-361}}}
&&%s&& %s We {53930 2010-11-11T14:33:52Z {831 Tjr}  #REDIRECT [[NetHackWiki:About]]}
&&%s&& %s Nethack {1581 2006-01-30T20:19:41Z {458 Kernigh} #redirect [[NetHack]] - "Nethack" is a common spelling #redirect [[NetHack]]}
&&%s&& %s Medusa {149943 2023-02-12T18:53:58Z {4001657 Atheistcanuck} deleted extraneous line {{monster
 |name=Medusa
 |difficulty=25
 |level=20
 |experience=634
 |speed=12
 |AC=2
 |MR=50
 |align=−15
 |frequency=Unique
 |genocidable=No
 |attacks=Weapon 2d4, Claw 1d8, [[gaze attack|Gaze]] 0d0 [[stoning]], Bite 1d6 [[poison]]
 |weight=1450
 |nutr=400
 |size=Large
 |resistances=Poison, Stoning
 |resistances conveyed=Poison (100%) (but see warning about being [[stoning|turned to stone]])
 |attributes={{attributes|Medusa|fly=1|swim=1|amphibious=1|humanoid=1|pois=1|omnivore=1|nopoly=1|hostile=1|strong=1|female=1|waitsforu=1|infravisible=1}}
 |reference=[[SLASH'EM 0.0.7E7F2/monst.c#line2294]]
}}
'''Medusa''' is a dangerous unique [[monster]] that appears in ''[[NetHack]]''. She is always found in the [[Dungeons of Doom]] between the level containing the [[magic portal]] to the [[Quest]] and the level containing the [[Castle]].

The [[gaze]] of Medusa can [[stoning|turn people to stone]] as it does in her original Greek folklore, and she also has a weapon attack, a claw attack and a [[poison]]ous strength-draining bite. Medusa is immune to poison and similarly immune to stoning ''except'' for her own gaze, with a special case in the code designed to handle this - see [[#Combat|the combat strategy section]] for details on how you can take advantage of this.

Medusa's [[corpse]] is poisonous to eat, and will also turn you to stone if you bite into it - eating her corpse with [[stoning resistance]] is guaranteed to confer [[poison resistance]].

==Generation==
{{main|Medusa's Island}}
Medusa will always appear on [[Medusa's Island|her own level]]; the first and second variants will place her on the downstair along with a [[statue]] of [[Perseus]], while the third raven-populated version has 3 eligible areas for Medusa and the downstairs to be generated. The snake-infested fourth version will place her on the leftmost and largest island, with four eligible squares for Medusa and the downstairs to be generated on.

==Strategy==
The most difficult part of reaching Medusa is often crossing the [[sea monster]]-infested waters. [[Levitation]] or [[water walking boots]] are the most common ways to cross the water. Using a [[wand of cold]], a [[frost horn]] or the [[cone of cold]] spell to freeze a path across the water is another option, as is filling the water with [[boulder]]s and/or some means of [[jumping]].

If you are trying to reach the island using boulders, the most efficient method is an uncursed [[scroll of earth]]. If need be, you can also push any boulder you find on the level above to the downstair and throw items to make them roll down. 8 boulders are needed for the [[Medusa's Island#First version|first version]], and 16 are needed for the [[Medusa's Island#Second version|second]]; this can be reduced to 7 and 14 respectively if you are willing to jump into water and crawl out. An [[amulet of magical breathing]] may also be used to traverse the level underwater, though you should waterproof your inventory beforehand to prevent as much of it getting [[wet]] as possible.

If crossing the water is not an option, you may also opt to dig a [[hole]] to the next level and then come back up by using the [[staircase]] - the stairs to the next level are always in the same room as Medusa, so be sure you are ready for her before going up. This also makes Medusa a nasty surprise for players deep-shafted below her domain from above via [[trap door]]: if you end up below dungeon level 20 or so (including the [[Castle]]), you should immediately be on the alert for the possibility of finding Medusa if you make your way back up. Maze levels are often a sign that you are between Medusa's island and the Castle, though you are not guaranteed to encounter one between those two floors.

===Combat===
The quickest way to deal with Medusa is to have [[reflection]] or [[apply]] a [[mirror]] towards her, which will reflect her gaze back upon her and turn her to stone; Medusa cannot be turned to stone by any other method. Rendering yourself [[invisible]] will make reflection ineffective, as she must be able to see you for her gaze to be reflected. Alternately, [[blind]]ing yourself or [[polymorph]]ing into a stoning-resistant creature protects you from her gaze, allowing you to take her on like any other monster.

[[Cancel]]ling Medusa renders her gaze ineffective and generates [[YAFM]]: "Medusa doesn't look all that ugly."{{refsrc|src/mhitu.c|2002|version=NetHack 3.6.0}} 

In addition, there are various levels of risk to account for when fighting Medusa if you cannot dispatch her through the 'easy' methods above:

* Be mindful of the [[speed]] system and the bonus turns it grants: Medusa has the same speed as an unhasted, unburdened player, and very fast speed in particular makes it possible to enter Medusa's room without her gaze stoning you instantly - or else stoning her instead if you have reflection. This can potentially be taken advantage of to kill her in one turn through other means, e.g. with a [[spellbook of finger of death|spell]] or [[wand of death]].
* The [[wand of sleep]] or [[spell of sleep]] can immobilize her and neutralize her gaze, but '''''only''''' as long as she is asleep - beware of her suddenly awakening and rendering you a statue in an instant!
* [[Hallucination]] can protect against all gaze attacks, but will only do so 75% of the time.{{refsrc|src/mhitu.c|1998|version=NetHack 3.6.0}} 
* It is a '''very''' [[bad idea]] to fight Medusa as a [[purple worm]] or [[mind flayer]] - eating her brain or engulfing her will cause the stoning properties of her corpse to trigger.{{refsrc|src/eat.c|46|version=NetHack 3.6.0}} 

While she is not [[covetous]], Medusa can and will escape to the stairs and travel up or down them if made to flee - should you lose track of her (e.g., seeing her disappear from the level while blind and using telepathy, but not finding her corpse or seeing a death message), beware of her around her lair and on the levels immediately above and below.

[[Pacifist]]s will want to avoid reflecting Medusa's gaze to kill her, which breaks the conduct; they can instead blind her and leave her to their pets, or additionally blind themselves, prepare a source of reflection, and give Medusa some powerful attack wands so she can kill herself with the rebounds.<!--Elbereth will protect you from any accompanying monsters. Leave that as an exercise to the reader.-->

Players lacking reflection might like to find and investigate the statue of [[Perseus]] on the level, as it may contain a [[shield of reflection]].

==History==
Medusa first appears in [[NetHack 2.2a]], where she was generated within a room in an ordinary level, and many an adventurer likely met an untimely end from not knowing they would soon see Medusa. [[NetHack 3.0.0]] adds a number of [[statue]]s to her room, though this is an ambiguous clue; in any case, the use of [[telepathy]] or a [[potion of monster detection]] is advisable in versions up to and including [[3.0.10]].

Medusa's Island first appears in [[NetHack 3.1.0]]; [[Nethack 3.6.0]] added two new possible layouts for the level.

===Multi-Medusa bug===
Medusa will never directly appear in a [[bones]] file.{{refsrc|src/bones.c|369|version=NetHack 3.6.0}} However, her statue can appear in bones files in [[NetHack 3.4.3]] and previous versions; this was [[Bugs in NetHack 3.4.3#C342-54|bug C342-54]] ({{commit|fbfb8e92abd9aa4e2420e5b24bb77eeddb926bc7|now fixed}}). As this does not prevent generation of an ordinary Medusa in the game loading the bones until the statue is unstoned, this could be used to have two or more Medusas in a single game; corpses of any unique monster could also be left in bones, allowing you to [[revive]] multiple Medusa corpses as well.

==Origin==
{{wikipedia|Medusa}}
In classical folklore, Medusa was one of the three monstrous Gorgons, generally described as winged human women with living venomous snakes in place of hair. Medusa was the only mortal among the trio—a later version of her origin written in Ovid's ''Metamorphoses'' asserted that she was originally a mortal human maiden, transformed into her current state by Athena as a punishment. While the ''[[wikipedia:Bulfinch's Mythology|Bulfinch]]'' variant of the tale asserts that this was a result of Medusa's own hubris regarding her beauty (as quoted by the encyclopedia entry), other versions have this occur after Poseidon and Medusa lay together in one of Athena's temples and desecrated it—the original Latin ''Metamorphoses'' and other interpretations indicate Medusa did so against her will.

In the tale of Perseus, he is sent to fetch Medusa's head by King Polydectes of Seriphus, who wanted to marry Perseus's mother Danaë and get rid of Perseus under the guise of having him fetch a gift. The gods were well aware of this, and gave Perseus divine assistance in the form of a [[Shield of reflection|mirrored shield]] (from [[Athena]]), [[Levitation boots|gold winged sandals]] (from [[Hermes]]), a [[Scimitar|sword]] forged by Hephaestus, and Hades's helm of darkness (both given by Zeus). These items were entrusted to the Hesperides, who also gave him a [[sack|knapsack]] to safely contain Medusa's head.

Perseus viewed Medusa safely using her reflection on the mirrored shield, then used it to guide his sword and behead her; as she was pregnant by Poseidon at the time, [[Pegasus]] the winged horse and the golden sword-wielding giant Chrysaor sprang from the neck of her headless body. Perseus then bagged Medusa's head and used the helm to escape the other two Gorgons; upon returning to Seriphus and discovering that his mother was taking refuge from Polydectes's violent advances, Perseus saved her by revealing the head, which turned Polydectes and his attendant nobles to stone. In popular culture, Medusa's "weakness" to reflection is often made more direct, with games such as ''NetHack'' making her vulnerable to her own reflected gaze.

The fourth variant of Medusa's Island serves as a sort of "palace" for her, with an abundance of snakes and black nagas as well as a [[yellow dragon]]—after her decapitation in some tales, her spilled blood was said to have given birth to several creatures, including the Sahara's poisonous vipers and the venomous, twin-headed dragon-like serpent known as [[wikipedia:Amphisbaena|Amphisbaena]] (represented by the yellow dragon). Black nagas, yellow dragons, and their offspring are also [[acidic]] and thus resistant to stoning. The crystal ball may also be an allusion to [[wikipedia:Graeae|the Graeae]], daughters of the sea-deities Phorcys and Ceto and sisters to the Gorgons (who were sometimes called "Graeae")—Perseus stole their sole shared eye in order to ransom it for information on the location of either Medusa herself or the three objects needed to slay her, depending on the telling.

==Variants==
===UnNetHack===
In [[UnNetHack]], hallucination can protect you from Medusa's stoning gaze.

===dNetHack===
In [[dNetHack]], Medusa has an additional pair of [[grabbing]] hug attacks; the first does 1d4 damage, while the second is far stronger at 4d8, making it more dangerous to approach her in melee. Her hair also makes 1-3 bite attacks against all adjacent hostile monsters once per global turn; these bites deal 1d6 damage and have a strength-draining poison. All monsters peaceful and hostiles can be affected by her stoning gaze if they can perceive her.

===EvilHack===
In [[EvilHack]], Medusa is a far more formidable opponent - she has an AC of -8, and is always generated with an [[orcish bow]] and 25-40 [[orcish arrows]], giving her a means to damage players keeping out of her melee range. Medusa retains her passively stoning gaze, while her weapon attack is improved to 4d4, and her claw attack is replaced with two attacks tied to her snake-filled hair: a 2d6 "tentacle" attack that can poison and drain strength, and a 4d4 bite attack that can induce gradual stoning.

===notdNetHack===
In addition to dNetHack changes above, Medusa in [[notdNetHack]] also has a poisonous 1d6 bite that drains strength.

Being turned to stone by Medusa is reported in the livelog and high score list as "petrified by Poseidon's curse".

==Monster stats by variant==
<simpletabs>
SLASH'EM|
{{monster
 |name=Medusa
 |difficulty=25
 |level=20
 |experience=634
 |speed=12
 |AC=2
 |MR=50
 |align=−15
 |frequency=Unique
 |genocidable=No
 |attacks=Weapon 2d4, Claw 1d8, [[gaze attack|Gaze]] 0d0 [[stoning]], Bite 1d6 [[poison]]
 |weight=1450
 |nutr=400
 |size=Large
 |resistances=Poison, Stoning
 |resistances conveyed=Poison (100%) (but see warning about being [[stoning|turned to stone]])
 |attributes={{attributes|Medusa|fly=1|swim=1|amphibious=1|humanoid=1|pois=1|omnivore=1|nopoly=1|hostile=1|strong=1|female=1|waitsforu=1|infravisible=1}}
 |reference=[[SLASH'EM 0.0.7E7F2/monst.c#line3939]]
}}
|-|
dNetHack|{{monster
 |name=Medusa
 |symbol={{brightgreen|@}}
 |tile=
 |difficulty=27
 |level=20
 |experience=743
 |speed=12
 |AC=2
 |MR=50
 |align=-15
 |frequency=0
 |genocidable=No
 |attacks=Weapon 2d4 physical, Claw 1d8 physical, Bearhug 1d4 [[drowning]], Bearhug 4d8 physical, Secondary bite 1d6 [[poison]] (strength), Wide-angle (passive) gaze 0d0 [[petrifcation]]
 |weight=1450
 |nutr=400
 |size=medium
 |resistances=[[poison]], [[petrification]]
 |resistances conveyed=[[poison]], [[petrification]]
 |attributes={{attributes|Medusa=|fly=1|swim=1|amphibious=1|slithy=1|pois=1|omnivore=1|nopoly=1|female=1|hostile=1|strong=1|collect=1|waitsforu=1|infravisible=1|notame=1}}
 |reference=[https://github.com/Chris-plus-alphanumericgibberish/dNAO/blob/compat-3.21.2/src/monst.c#L5849 dNetHack src/monst.c, line 5849]
}}
|-|
EvilHack|{{ monster
 |name=Medusa
 |difficulty=28
 |level=24
 |experience=984
 |speed=12
 |AC=-8
 |MR=50
 |align=-15
 |frequency=Unique
 |genocidable=No
 |attacks=Weapon 4d4, Tentacles 2d6 [[poison]], Gaze [[stoning]], Bite 4d4 [[stoning]]
 |resistances conveyed=poison (100%)
 |resistances=poison, petrification
 |attributes={{attributes|Medusa|fly=1|swim=1|amphibious=1|humanoid=1|pois=1|omnivore=1|nopoly=1|hostile=1|strong=1|pname=1|female=1|nasty=1|waitforu=1|infravisible=1|m4_vulnerable_fire=1}}
 |size=Large
 |nutr=400
 |weight=1450
 |reference=[https://github.com/k21971/EvilHack/blob/master/src/monst.c#L3104 EvilHack - monst.c, line 3104]
}}
</simpletabs>

==Encyclopedia entry==
{{encyclopedia|
Medusa, one of the three Gorgons or Graeae, is the only one of her sisters to have assumed mortal form and inhabited the dungeon world.
 
When Perseus was grown up Polydectes sent him to attempt the conquest of Medusa, a terrible monster who had laid waste the country.  She was once a beautiful maiden whose hair was her chief glory, but as she dared to vie in beauty with Minerva, the goddess deprived her of her charms and changed her beautiful ringlets into hissing serpents.  She became a cruel monster of so frightful an aspect that no living thing could behold her without being turned into stone.  All around the cavern where she dwelt might be seen the stony figures of men and animals which had chanced to catch a glimpse of her and had been petrified with the sight.  Perseus, favoured by Minerva and Mercury, the former of whom lent him her shield and the latter his winged shoes, approached Medusa while she slept and taking care not to look directly at her, but guided by her image reflected in the bright shield which he bore, he cut off her head and gave it to Minerva, who fixed it in the middle of her Aegis.
|[ Bulfinch's Mythology, by Thomas Bulfinch ]
}}

==References==
<references/>

[[Category:Unique monsters]]
{{nethack-366}}}
&&%s&& %s Trap {148090 2022-09-06T06:13:43Z {4000978 Aximili} Link to [[door]] and [[tin]] instead of having a door traps section {{features}}
In ''[[NetHack]]'', '''traps''' are mechanisms on a space which may activate when you or a [[monster]] steps on them. Traps can be detected through various methods, and certain types of traps can be disarmed with the #[[untrap]] command.

==List of traps==
The following traps are activated by stepping on their [[square]]:

* [[anti-magic field]]
* [[arrow trap]]
* [[bear trap]]
* [[dart trap]]
* [[fire trap]]
* [[hole]]
* [[falling rock trap]]
* [[land mine]]
* [[level teleporter]]
* [[magic portal]]<sup>†</sup>
* [[magic trap]]
* [[pit]]
* [[polymorph trap]]
* [[rolling boulder trap]]
* [[rust trap]]
* [[sleeping gas trap]]
* [[spiked pit]]
* [[squeaky board]]
* [[statue trap]]
* [[teleportation trap]]
* [[trap door]]
* [[vibrating square]]<sup>†</sup>
* [[web]]

<sup>†</sup>: The vibrating square and magic portal are internally represented as traps, even though they are meant to aid the player instead of causing peril.

The following traps are activated by interacting with certain items or doors:

* [[container trap]]
* [[tin#Explosion|exploding tin]]
* [[door#Door traps|door trap]]

==Generation==
In both filler levels and most special levels, a "random" trap is selected uniformly from the whole set of eligible traps, subject to level difficulty checks and some exclusions.{{refsrc|src/mklev.c|1271|version=NetHack 3.6.6}} Oddly, special levels that contain maze filler (the Castle, Asmodeus, Baalzebub, Orcus, and all real and fake Wizard's Tower levels, but ''not'' the Big Room or the Catacombs) use a completely separate formula that ignores level difficulty for selecting traps in the mazes.{{refsrc|src/sp_lev.c|829|version=NetHack 3.6.6}} It nonetheless ends up working much the same way overall, but actually makes fire traps ''less'' common than they would otherwise be in Gehennom on those levels.

{{upcoming|NetHack 3.7.0|While [[hallucinating]], traps may appear on the map and in messages as random or nonexistent trap types, though any messages resulting from triggering the trap are unchanged.}}

===Fake bones===
Certain types of traps up to dungeon level 4 may have a pre-aged [[corpse]] generated on top, along with random cursed weapons, tools, food or gems. These are often referred to as  '''fake bones''', referring to their similarity to [[bones file]]s. The chance is 1 &minus; {{sfrac|Dlvl &minus; 1|4}}, meaning that every eligible trap will have a corpse and items on the first floor.{{refsrc|src/mklev.c|1415|version=NetHack 3.6.6}} There will always be at least one possession, and there is a 20% chance of placing an additional possession after each one.{{refsrc|src/mklev.c|1487|version=NetHack 3.6.6}}

Squeaky boards and rust traps never have a corpse because they are non-lethal, and pits or holes also never generate a corpse; any corpses found in pits are usually from generated monsters that fell in, especially if their associated items are present (e.g. finding an [[orcish helm]] with a [[goblin]] corpse).

==Detection==
{{merge|[[Portal detection methods]]}}
Avoiding traps in the dungeon takes patience and care. Therefore, the more time-consuming of these methods are only worthwhile when you are especially vulnerable. You can minimize your chances of stepping on a trap by paying close attention to monsters, pets, [[you hear|noises]], and terrain. Be wary of the telltale signs of traps such as conspicuous boulders, suspicious corpses, and piles of rocks, darts, or arrows. Traps that you've already discovered will also not be visible under items like these, so it's a good idea to use the [[trap id]] command if you need to step onto that square that looks suspicious, even though you may have already been in that area and discovered all traps. By walking only where you have seen pets or monsters safely walk, you can avoid most traps. Remember where you have safely stepped before. [[Elbereth]] can cause monsters to [[flee]], possibly uncovering traps as they do. A [[leash]]ed pet will whine if it is near a trap. [[Magic resistance]] and [[fire resistance]] can help nullify some of the more dangerous effects of traps.

The [[search]] command is a great way to uncover traps without setting them off. #Untrap can be used on doors and containers. You can improve your chances of finding traps if you:
* have high Luck;
* put on or [[Eating jewelry|eat]] a [[ring of searching]];
* put on a [[pair of lenses]];
* wield [[Excalibur]];
* wield the blessed [[Master Key of Thievery]] (or uncursed, if you are a [[Rogue]]) without gloves;
* play a role that gets intrinsic searching
** [[Ranger]]: Level 1
** [[Monk]]: Level 9
** [[Rogue]]: Level 10
** [[Archeologist]]: Level 10
** [[Tourist]]: Level 10

Some items can be useful in detecting traps, although they may have better uses elsewhere:
* [[scroll of gold detection]] (read while cursed or [[confused]])
* [[crystal ball]] (scry for '''^''' with high [[intelligence]])
* [[wand of secret door detection]]
* [[spellbook of detect unseen]]
* The [[Bell of Opening]]

==Removal==
Because of technical limitations in the level format, only one trap can exist on any given square. If you aren't able to #[[untrap]] a physical trap, or if the trap is non-physical, you can usually remove most traps by entering the square and digging a [[pit]]. This will overwrite the existing trap in the level data, replacing it with a pit trap. You can then leave the pit and avoid it, or fill it by pushing a [[boulder]] in. The downside to this strategy is that you must expose yourself to the trap by entering its space.

==History==
The "fake bones" found on early traps are introduced in [[NetHack 3.6.1]].

==Variants==

=== UnNetHack ===
[[UnNetHack]] adds [[ice trap]]s.

=== xNetHack ===
{{main|xNetHack#Trap changes|l1=xNetHack §&nbsp;Trap changes}}
In [[xNetHack]], you are asked for confirmation when stepping onto a square with a trap you have already found (and are not clearly immune to). This eliminates the problem of accidentally walking onto traps that you can't see, without needing to use the [[trap id]] command at every step. xNetHack also changes the effects of many traps.

=== FIQHack ===
[[Lenses]] in FIQHack provide [[automatic searching]], making them useful for detecting traps.

==References==

<references/>
{{nethack-366|offset=1}}
{{slashem-7E7}}
[[Category:Dungeon features]]
[[Category:Traps]]}
&&%s&& %s Hole {148135 2022-09-09T18:06:09Z {4000114 Derekt75} /* Messages */ trying to move sourceref A '''hole''' is a [[trap]], but it is always visible. It shows as {{brown|^}} or [[image:hole.png]] on the screen. A hole causes you, affected monsters, and objects to fall through at least to the next level. A [[trapdoor]] is very similar to a hole.

==Generation==
Holes are much less likely to be randomly generated than other eligible types. Only 1 in 7 attempts to randomly place a hole will succeed. Holes cannot be randomly generated on levels with non-diggable floors, such as the [[vibrating square]] level or the [[Castle]]. If the floor is non-diggable, the hole trap is replaced with a falling rock trap. Holes cannot be generated beneath a boulder. Unlike other traps, holes are always generated visible.

Some of levels with undiggable floors will let you create a pit but not a hole.

===Fast creation of holes===
You can zap a [[wand of digging]] or cast the spell {{Spell of|dig}} downward to make a hole in one turn.

===Slow creation of holes===
You can [[digging|dig]] downward with a [[pick-axe]] or [[dwarvish mattock]] to make a hole, but this process is very slow and not useful for escaping monsters. The first time you dig downward you create a [[pit]] - as you are digging it, you do not fall in, which matters for those with [[cockatrice]] corpses in their posession. Beware, however, that items on the adjacent squares may fall in the pit.

If the level allows you to and you again dig downwards, the pit becomes a hole and any items on the square will fall through to the same random level as you.

==Effects==
If [[you]] step on a hole,<ref>Most common execution sequence: {{sourcecode|allmain.c|408}},   {{sourcecode|cmd.c|1940}},  {{sourcecode|hack.c|1406}},  {{sourcecode|hack.c|1526}},  {{sourcecode|trap.c|944}}</ref> there is a chance you escape its effects. This chance is normally 20%,{{refsrc|trap.c|619}} but 0% if [[fumbling]] or in [[Sokoban]], and 100% if outside [[Sokoban]] and  [[levitation|levitating]], [[flying]], being [[grabbing attack|held]], [[polymorph]]ed into a [[huge]] monster etc.{{refsrc|trap.c|350}}

In case you are affected, you will fall down at least one dungeon level:  75% chance of 1, 19% of 2, 5% of 3, 3*4^(-n) of n levels down.{{refsrc|trap.c|335}} However, you always stay in your current [[branch]], except when falling from the [[Castle]] into the [[Valley of the Dead]]. All eligible tiles of your destination level are equally likely.{{refsrc|do.c|1194}} Your destination level and tile are re-selected independently each time you fall through the trap. Adjacent or leashed [[pet]]s and [[follower]] species will come along, and each object only on your own tile has a 33% chance of following (3% for boulders).<ref>Objects at all: {{sourcecode|trap.c|364}} or  {{sourcecode|do.c|1032}}; chance: {{sourcecode|dokick.c|1202}}</ref> They will be placed on your landing spot or adjacent to it.

{{todo|If a monster steps on a hole, chance of escaping (especially if known trap type, or player-known trap for pets), deliberate usage as an escape route if damage. Monsters and unattended objects will always move down one level.

[[Autopickup]] takes effect both on top of the hole and on your destination square.

Objects: thrown or kicked onto hole, or "agitated" if a freshly-dug hole or a pet on a cursed leash kept you from falling through. The only case they don't fall through is if you escaped the trapdoor and the game doesn't even show the trap symbol.

You can fall past hard floor levels. Reference [[Dogley Dimension]].}}

If [[you]] or a [[monster]] (see below) step on to a hole and fail to escape it, or an item is thrown onto the same square as a hole, it will fall a random number of [[dungeon level]]s, with increasingly less chance of higher numbers of levels. A [[pet]] that is [[leash]]ed to you may be dragged after you, with a chance that the leash may break and the pet remains on the level with the hole.

The falling object will always remain in the same dungeon branch as the hole. Note that this random calculation is redone every time the hole is fallen through - even if the same hole is used on the very next action (even if it is the same turn due to having intrinsic or extrinsic [[speed]]), the dungeon level calculated may be different.

Once the random number of levels has been calculated, the falling object is placed randomly on the level and any objects that fell in as part of the same turn are placed nearby. Normal room-and-corridor levels will always place falling objects in a valid room.

If you are [[flying]] over or standing on an hole or a trapdoor, and use the {{kbd|>}} (descend) command, you will always go down exactly one dungeon level.{{refsrc|do.c|823}} <!-- Is that really true? It's also the case when you fall down a hole you've just dug.-->

Creatures of size "huge" or larger will not fit into holes or pits and can walk across them. [[Flying]] creatures can also traverse holes.

===Sokoban===

Holes in [[Sokoban]], only possible on levels 2, 3 or 4, are special. These holes have air currents that will pull you into them even if you are [[flying]], [[jumping]] or [[levitation|levitating]] over them.  The only way to circumvent a hole in Sokoban without filling it with a boulder is to throw an [[punishment|heavy iron ball (chained to you)]] over the hole. This carries a [[Luck]] penalty.

==Removal==
A hole can be removed by pushing a boulder onto it.

==Monster use==
Sometimes a [[monster]] will intentionally jump into an existing hole to escape. If a monster has a wand of digging, it might zap it downward as well to create a hole, especially if it is damaged. This can be annoying; whenever you find that [[dwarf]] (for example), it makes another hole, and when you finally kill it, the wand can be empty. Monsters with digging tools will not create pits or dig downwards if in a pit to escape.

==Strategy==
One technique for dealing with holes is to go down any [[stairs]] you encounter and then go back up again immediately. This way, if you should ever fall down to that level you will know where the exit is. A high [[dexterity]] stat will reduce your chances of falling down the hole should you accidentally step on it.

==Messages==
{{message|There's a gaping hole under you!|You fell into a hole.}} <ref>{{sourcecode|trap.c|944}} (Hole on you) and {{sourcecode|trap.c|1889}} (On monsters)</ref>
{{message|You fall down a shaft!|You fell 2 levels.}}
{{message|You fall down a deep shaft!|You fell 3 levels.}}
{{message|You fall down a very deep shaft!|You fell 4+ levels.}}

==References==
<references/>
[[Category:Dungeon features]]
[[Category:Traps]]
{{nethack-343}}}
&&%s&& %s Wand of digging {147740 2022-08-21T02:40:30Z {4001597 Hordes} /* Description */ reorder logically {{wand
 |name=digging
 |cost=150
 |type=ray
 |maxcharges=8
 |abundance=5.5%
 |spell=dig
 |muse=def
}}

A '''wand of digging''' is a type of [[wand]] that appears in ''[[NetHack]]''.

==Generation==
Monsters may be generated carrying a wand of digging as a [[defensive item]], with the exception of [[floating eye]]s.{{refsrc|src/muse.c|536|version=NetHack 3.6.6}}

Minotaurs have a {{frac|3}} chance of [[monster starting inventory|being generated with]] a wand of digging; the one generated upon entering the [[Plane of Earth]] is guaranteed to have one.

==Description==
[[Zap]]ping a wand of digging in a given direction produces a ray that can [[dig]] open a corridor of several [[square]]s through [[solid rock]] and walls, destroying any [[door]]s in its path; the ray has no effect on [[boulder]]s. Zapping the wand upward causes a [[rock]] to fall from the ceiling and bonk you on the head unless you are underwater.

Zapping the wand downward creates a [[hole]], and doing this on an undiggable floor creates a [[pit]]. Unless you are [[levitating]], [[flying]], or else happen to escape, you will fall in. Doing so on a [[headstone]] always creates a pit on the square and unearths the contents of that grave (with appropriate alignment penalties).

Zapping the wand in a maze level will limit the ray's effect to one square; the ray has no effect on undiggable walls and rock. Zapping the wand while being [[engulfed]] by a non-[[whirly]] monster sets the monster's current HP to 1 and expels you.{{refsrc|src/dig.c|1410|version=NetHack 3.6.6}} Razing the walls and/or doors of [[Minetown]] will anger the [[watch]].

[[Apply]]ing a [[charge]]d wand of digging or wresting one last charge from applying an empty wand will break the wand and create pits or holes on your square and the eight squares around you, with the exception of undiggable floors and [[stairs]], [[boulder]]s or [[trap]]s.{{refsrc|src/apply.c|3414|version=NetHack 3.6.6}}{{reffunc|dig.c|dig_check}} This can also destroy [[altar]]s and [[throne]]s.

A fleeing monster with a wand of digging may zap it wand downward to escape; monsters that try this on an undiggable floor will simply fail to dig, though this does not stop them making repeated attempts. [[Shopkeeper]]s, [[guard]]s, and [[aligned priest|temple priest]]s will not use a wand of digging, though they can still receive them.{{refsrc|src/shknam.c|655|version=NetHack 3.6.6}}{{refsrc|src/vault.c|387|version=NetHack 3.6.6}}{{refsrc|src/priest.c|239|version=NetHack 3.6.6}}<ref>While none of them are supposed to receive a wand of digging, <code>mtmp->{isshk,isgd,ispriest}</code> are only set after <code>makemon()</code> is called.</ref> 

Zapping the wand, seeing a monster zap it, or [[engraving]] with the wand will [[auto-identify]] it.

{{upcoming|NetHack 3.7.0|Juiblex now only loses half of his HP when hit with digging magic from inside.}}

==Strategy==
The wand of digging is an invaluable item that serves multiple purposes for any player, especially those doing [[speed ascension]]s; they can also be extremely annoying to snag from monsters without "losing" at least one charge, if not several. The most common use for a wand of digging is as an [[escape item]] to extract yourself from a hairy situation and gain some breathing room - of note is that it is the only way you can dig at all while levitating. Any text engraved with a wand of digging is as durable as text engraved with a [[weapon]] or hard [[gem]] - this makes it as effective as an [[athame]] and slightly less effective than a [[wand of fire]] or [[wand of lightning]] for engraving [[Elbereth]]. 

A wand of digging can be useful for the aspiring [[Stealing from shops|shoplifter]]; one of the best methods of doing so is to dig through the shop walls using the wand, then step outside of them and zap it downward.

Wands of digging can aid in clearing [[treasure zoo]]s, [[throne room]]s and other similar [[special room]]s without waking the inhabitants, especially since destroying a door this way does not create [[noise]].

The wand is a practically ubiquitous aid in navigating [[Gehennom]] - even with the above difficulty in obtaining one from a monster, the player is likely to have several spare wands by the time they reach the [[Valley of the Dead]]. You can zap a [[wand of digging]] diagonally at the [[Wizard's Tower]] without waking the [[Wizard of Yendor]] up, then shoot a death ray from that position through the newly-created gap, killing him without giving him the chance to cast spells at you if it hits. You can then pick up the [[Book of the Dead]] with relatively little trouble.

The wand of digging also proves valuable for [[ascension kit]]s; navigating the Plane of Earth is easiest with this method, and zapping the doors on the [[Astral Plane]] can save a lot of time in searching for your high altar.

===Digging for victory===
{{main|Digging for victory}}
While not always the primary tool in a "dig for victory", the wand of digging is likely to be essential, both for escaping a [[Big Room]] and for evading minotaurs as you near the [[Castle]].

==History==
The wand of digging has appeared in the game since [[Hack121]], a variant of Jay Fenlason's Hack.

==Messages==
{{message|You barely hear some noises.|You zapped a wand of digging while underwater.}}
{{message|The <wall/rock> glows then fades.|You zapped a wand of digging at undiggable terrain.}}
{{message|The floor is too hard to dig in here.|A wand was zapped at an undiggable floor.}}
{{message|The door is razed!|A door was destroyed by a ray from a wand of digging.}}

==Variants==
:''See also: [[Wands Balance Patch]]''
===UnNetHack===
In [[UnNetHack]], wands of digging are no longer restricted to digging a single square on maze levels. Wands of digging are ineffective on the [[ice wall]]s and [[crystal ice wall]]s generated in [[Sheol]], although other forms of digging are still effective.

Zapping a wand of digging to escape the engulfing of Juiblex will only halve his current HP, rather than reducing it to one.{{refsrc|src/dig.c|1219|unnethack=1406}}

===SLASH'EM===
In [[SLASH'EM]] and its variant, zapping a boulder with a wand of digging will vaporize it; doing this in [[Sokoban]] will incur a -1 [[Luck]] penalty. Rays from a wand of digging will also halve the current HP of "stony" monsters, including [[xorn]]s, [[earth elemental]]s, [[statue gargoyle]]s and [[stone golem]]s; strangely, this does not include regular [[gargoyle]]s.{{refsrc|mondata.h|206|version=SLASH'EM 0.0.7E7F2}}

===SlashTHEM===
In [[SlashTHEM]], the wand of digging retains its SLASH'EM traits. One can be found on the home level of the [[Geek quest]].

===NetHack Fourk===
In [[NetHack Fourk]], all wands are subject to [[skill]] level; using a wand of digging with a higher skill level increases the amount of tiles that can be dug through.

===FIQHack===
In [[FIQHack]], the wand of digging functions as it does in Fourk. Additionally, a wand zapped at Master skill ignores maze restrictions.

==References==
<references/>
{{nethack-366}}
[[Category:Wands|Digging]]}
&&%s&& %s Amulet of Yendor {145900 2022-05-06T09:07:33Z {4000251 Netzhack} /* Encyclopedia entry */ {{amulet
  |tile=[[Image:Amulet_of_Yendor.png]]
  |name=Amulet of Yendor
  |appearance=Amulet of Yendor
  |cost=30000
}}
The ultimate goal of a game of ''NetHack'' is to find the '''Amulet of Yendor''', bring it to the [[Astral Plane]], and [[offer]] it to your [[god]] in order to [[ascension|ascend]] to the status of demigod.

== Generation ==
The Amulet is always held by the [[high priest of Moloch]] in [[Moloch's Sanctum]]. An "Amulet of Yendor" generated anywhere else is actually a [[cheap plastic imitation of the Amulet of Yendor|fake]].

== Effects ==

The Amulet of Yendor will resist being put into any type of [[container]]; it must be carried in main inventory.

=== When carried ===

When you are carrying the Amulet of Yendor:
* You get [[clairvoyance]], if it is not blocked by a [[cornuthaum]].
* When casting spells, your [[energy]] is drained. See below.
* [[Nutrition|Hunger]] is increased by 1 every 20 turns (in addition to normal amulet hunger, if you're wearing any amulet).{{refsrc|eat.c|2158}}
* Your [[luck]] (bad or good) times out more rapidly, if not blocked by a [[luckstone]].
* Monster difficulty will depend on your deepest level reached, not your current dungeon level.{{refsrc|dungeon.c|1460}}
* [[Nymph]]s, [[Demon|named demons]], [[wumpus]]es, [[long worm]]s, and [[eel]]s are always generated awake.{{refsrc|makemon.c|982}}{{refsrc|makemon.c|1036}}
* You cannot [[levelport]] or [[branchport]].{{refsrc|teleport.c|572}}{{refsrc|artifact.c|1320}}
* Teleportation within the level is blocked {{frac|3}} of the time.{{refsrc|teleport.c|417}}
* [[Follower]] monsters will follow you between levels even if they're fleeing.
* Climbing the upstairs or quaffing a cursed [[potion of gain level]] in dungeon level 1 takes you to the [[Plane of Earth]].{{refsrc|do.c|971}}
* You can activate the endgame [[magic portal|portal]]s.

While carrying the amulet, casting [[spellbook|spells]] takes more energy than usual. The penalty is between 1 and 2''n'' Power points, where ''n'' is the normal energy cost of the spell cast. This means spell costs will be doubled on average, and may use up to three times as much energy in the worst case.{{refsrc|spell.c|753}}

==== Mysterious force ====
{{main|Mysterious force}}
If you try to go up a dungeon level in Gehennom while carrying the Amulet of Yendor, the [[mysterious force]] may work against you.

=== When worn or wielded ===

When wearing or wielding the Amulet, you may get messages about it getting "hotter" as you approach magic portals.

Every game turn, there is a {{frac|15}} chance that you will receive a message if you are near a magic portal.{{refsrc|wizard.c|63}}

{|class="prettytable"
! Distance
! Message
|-
| 3-square radius
| "The Amulet of Yendor feels hot!"
|-
| 8-square radius
| "The Amulet of Yendor feels very warm."
|-
| 12-square radius
| "The Amulet of Yendor feels warm."
|-
| Farther
| No message
|}

== Offering ==

If you offer the Amulet of Yendor on the correct [[high altar]] on the Astral Plane, you ascend and win the game. Offering the Amulet on another god's high altar will also end the game; your current god is angered, but the altar's god allows you to escape in celestial disgrace. This is effectively an ascension, but is less prestigious because it removes the need to find the correct altar.

Attempting to offer the Amulet on a non-high altar gives a message:
{{message|You feel homesick.|You are [[hallucinating]].}}
{{message|You feel ashamed.|The altar is cross-aligned.}}
{{message|You feel an urge to return to the surface.|The altar is coaligned.}}

=== Offering to Moloch ===

You may offer the Amulet of Yendor to [[Moloch]] on the unaligned high altar in the [[Sanctum]]. This leads to [[instadeath]]:

{{message|Moloch shrugs and retains dominion over <your god>, then mercilessly snuffs out your life.}}

The cause of death is ''"Moloch's indifference"''. If you survive, by wearing an [[amulet of life saving]], the message continues:

{{message|Moloch snarls and tries again...}}
{{message|You disintegrate into a pile of dust!}}

This happens even if you are disintegration resistant. The cause of death is then ''"the wrath of Moloch"''.

Should you somehow survive this&ndash;in [[NetHack 3.6.6]], the only way of doing so is by declining to die in [[explore mode|explore]] or [[wizard mode]]&ndash;, the following message will appear:

{{message|A cloud of black smoke surrounds you...}}

This will be treated as [[escaping the dungeon]].

== Messages ==

;You feel the amulet draining your energy away.
:You cast a spell while carrying the amulet. Between 1 and 2''n'' extra Power points were used, where ''n'' equals to the Power originally needed to cast the spell. This Power drain is incurred before the normal Power used for the spell is calculated, resulting in spells occasionally being unable to be cast due to a lack of energy. Ideally, even with 0% spell failure, you will require 3''n'' Power to ensure a spell always works.

== Distinguishing forgeries ==
{{main|cheap plastic imitation of the Amulet of Yendor}}
It is possible to find cheap plastic imitations of the Amulet of Yendor at several places in the [[Mazes of Menace]]. These generally appear to the player as "the Amulet of Yendor", but messing up and offering one of them to your god carries a penalty to luck, and possibly alignment and your god's anger (if you attempt to offer a ''known'' fake). But the real danger lies in becoming confused by the abundance of fakes and carrying one off instead of the real Amulet if, for instance, the Wizard steals it from you. There are several ways to avoid this fate. Many players will immediately name the real Amulet "REAL" or something similar immediately upon claiming it from the high priest. Another technique is to attempt to put the Amulet into a [[container]]; the real Amulet will resist, but a fake will go in. Also, quaffing a cursed [[potion of gain level]] on dungeon level 1 will make you "have an uneasy feeling" if you don't have the real Amulet, but take you to the [[Plane of Earth]] if you do.
{{upcoming|NetHack 3.7.0|The stairs up from level 1 will be described as leading "to the [[Elemental Planes]]" if you have the real Amulet, or "[[escaping the dungeon|out of the dungeon]]" otherwise.}}

==UnNetHack==
In [[UnNetHack]], the Amulet has a chance of randomly [[teleport]]ing within the level when dropped for any reason. This is in many ways balanced by the removal of the [[mysterious force]]. The probability depends on the Amulet's [[BUC|beatitude]]: if [[cursed]], the Amulet teleports half of the time; if uncursed, {{frac|4}} of the time; and if blessed, {{frac|16}} of the time. This also applies if it is dropped by a monster, e.g. [[Cthulhu]] who originally has the Amulet.

Sacrificing the Amulet of Yendor breaks atheist conduct in [[UnNetHack]], unlike in vanilla NetHack. The player is warned if the conduct would be broken this way. In order to complete the game, one must [[invoke]] the Amulet on the corresponding altar instead.

== Mythology ==
The Amulet of Yendor is based on the ''[[Rogue (game)|Rogue]]'' item of the same name, which is also used to end the game.

== Encyclopedia entry ==
{{encyclopedia|
This mysterious talisman is the object of your quest. It is said to possess powers which mere mortals can scarcely comprehend, let alone utilize. The gods will grant the gift of immortality to the adventurer who can deliver it from the depths of Moloch's Sanctum and offer it on the appropriate high altar on the Astral Plane.
}}

== References ==

<references />

{{nethack-366}}
{{DOD}}

[[Category:Unique items|A]]
[[Category:Amulets|Yendor]]}
&&%s&& %s Amulet {147191 2022-08-04T02:05:49Z {4001279 Umbire the Phantom}  {{items}}
An '''amulet''' is an [[item]] that a character can [[put on]] around his or her neck. It usually confers magical powers on the wearer, but amulets such as the [[amulet of strangulation]] can also be hazardous. Amulets are represented by a double quotation mark: {{cyan|"}}. This is also the command to display which amulet you are currently wearing.

Wearing any amulet will increase the rate at which you get [[nutrition|hungry]], by an extra 1 nutrition per 20 turns.{{reffunc|eat.c|gethungry}} Carrying the Amulet of Yendor consumes an additional 1 nutrition per 20 turns, regardless of whether you are wearing it.

All amulets have a [[weight]] of 20, are made of [[iron]], and have a base price of 150 [[zorkmid]]s, with the exception of [[cheap plastic imitations of the Amulet of Yendor]] (made of [[plastic]] and worth nothing) and the two [[artifact]] amulets, [[The Eye of the Aethiopica]] and the [[Amulet of Yendor]].

{{Upcoming|NetHack 3.7.0|Wearing a [[cheap plastic imitation of the Amulet of Yendor]] no longer incurs amulet hunger.}}

==Table of amulets==

{|class="wikitable sortable"
!Amulet!!Relative probability!!When eaten!!Notes
|-
|[[amulet of change]]||13.0%||Changes [[gender]]||90.5% generated cursed
|-
|[[amulet of ESP]]||17.5%||[[Telepathy]]||
|-
|[[amulet of life saving]]||7.5%||''(no effect)''||
|-
|[[amulet of magical breathing]]||6.5%||[[Breathless]]ness||
|-
|[[amulet of reflection]]||7.5%||''(no effect)''||
|-
|[[amulet of restful sleep]]||13.5%||Restful sleep||90.5% generated cursed
|-
|[[amulet of strangulation]]||13.5%||Instantly [[Nutrition|choke]]||90.5% generated cursed
|-
|[[amulet of unchanging]]||4.5%||Revert to original form||
|-
|[[amulet versus poison]]||16.5%||[[Poison resistance]]||
|- class="sortbottom"
|colspan="3"|
|- class="sortbottom"
|[[cheap plastic imitation of the Amulet of Yendor]]||0||''(inedible)''||
|- class="sortbottom"
|[[Amulet of Yendor]]||0||''(inedible)''||Cannot be put in a [[container]]
|- class="sortbottom"
|[[The Eye of the Aethiopica]]||&mdash;||[[Telepathy]]||[[Wizard]] [[quest artifact]]
|}

Most amulets can be [[eating jewelry|eaten]] by polymorphing into a [[metallivore]]. Eaten amulets with an eaten have a 20% chance of applying their effect permanently, except for the amulet of strangulation, which has a 95% chance to choke you (stopped by [[unbreathing]]).

{{upcoming|NetHack 3.7.0|The following new amulets were added. Both auto-identify when worn, except the amulet of flying if you were already flying. The probabilities of other amulets have been adjusted: ESP to 12%; strangulation, restful sleep, versus poison, change to 11.5%; live saving, magical breathing to 7.5%; unchanging to 6%. }}
<!-- Unfortunately tables inside Template:Upcoming don't work. -->
{|class="wikitable sortable"
!Amulet!!Relative probability!!When eaten!!Notes
|-
|[[amulet of flying]]||7.5%||''(no effect)''||
|-
|[[amulet of guarding]]||6.0%||+2 [[protection]] (+2 AC, +2 MC)||May be worn by monsters.
|}

==Generation==

Amulets comprise 1% of all randomly-generated items in the main dungeon,
1% in containers, and 4% in [[Gehennom]]. The second column above is the relative probability of each subtype.

The ones generated 90.5% cursed are 9% uncursed and 0.5% blessed. All others are generated 5% cursed, 90% uncursed, 5% blessed.

The Amulet of Yendor is a [[unique item]] found only in [[Gehennom]].
Its fake counterpart is found only on the [[Rogue level]], in the inventories of certain high-level monsters, and in the bones files of people who had a real or fake amulet themselves, where the real amulet is replaced with a fake one.

==Identification==

All amulets cost 150[[zm]] and weigh 20, so they cannot be distinguished using [[price identification]]. The appearance of the first 9 types of amulet in the table are [[randomized appearance|randomized]] from the following descriptions:

 circular    spherical   oval       
 triangular  pyramidal   square 
 concave     hexagonal   octagonal

Non-cursed amulets are safe to try on; the effect may become obvious after a while, such as for the amulet of ESP, and you can always remove it if it is strangulation or restful sleep. The only risk is a small chance of changing genders, which does not have an effect on gameplay for the most part. Once strangulation and restful sleep are ruled out, even cursed amulets can be worn safely and beneficially as long as you don't have another amulet you'd rather be wearing instead.

Amulets of change and strangulation always formally identify themselves when worn.  Every other amulet (other than the real and fake Amulets of Yendor) adds a line to the [[enlightenment]] screen, although some lines can have other sources:

{|class="wikitable"
!Amulet of...
!produces the line...
!Other sources
|-
|ESP
|"You are telepathic."
|[[Helm of telepathy]], some quest artifacts, intrinsic
|-
|life saving
|"Your life will be saved."
|none
|-
|magical breathing
|"You can survive without air."
|none
|-
|reflection
|"You have reflection."
|silver [[dragon scale mail]], [[shield of reflection]], wielded [[Longbow of Diana]] or wielded [[Dragonbane]] (3.6.1)
|-
|restful sleep
|"You fall asleep."
|none
|-
|unchanging
|"You can not change from your current form."
|none
|-
|versus poison
|"You are poison resistant."
|green [[dragon scale mail]], [[ring of poison resistance]], [[alchemy smock]], intrinsic
|}

In addition, [[intelligent]] monsters will only pick up and put on life saving (if living) and reflection.

In NetHack 3.4.3, Amulets of ESP can be identified using the [[naming artifacts|artifact naming trick]], because they cannot be named "[[The Eye of the Aethiopica]]". In NetHack 3.6.0, no amulet can be named "The Eye of the Aethiopica", so this method is ineffective at identifying amulets of ESP. Note that it is exploiting a bug that may be fixed in [[variant]]s&mdash;including NAO version of NetHack. Additionally it may be considered [[cheating]].

The real Amulet of Yendor, unlike the fakes, cannot be placed in a container ("The Amulet of Yendor cannot be confined in such trappings.")

{{upcoming|NetHack 3.7.0|The new amulet appearances are pentagonal and cubical.}}

==Strategy==

Amulets cannot be destroyed by electric [[shock]]s, so unless stolen by a [[nymph]] or [[monkey]] they are reliable at conferring their effect.

== Variants ==
=== SLASH'EM ===

[[SLASH'EM]] adds some more amulets.

{| class="prettytable sortable" 
!Item
!Symbol
!Base type
!Notes
|-
|[[Amulet of flying]]
|{{cyan|"}}
|Randomized
|Grants flight.
|-
|[[Amulet of drain resistance]]
|{{cyan|"}}
|Randomized
|Grants [[level drain resistance]].
|-
|[[Amulet versus stone]]
|{{cyan|"}}
|Randomized
|Saves your life if you're [[petrification|turned to stone]], then alters its [[BUC]] status or disintegrates.
|}

===SLASH'EM Extended===

[[Slash'EM Extended]] adds even more amulets and also allows them to be identified by dropping them down a [[toilet]]. This produces a message similar to dropping a [[ring]] down a [[sink]], so the spoiled player can know what type of amulet it was. [[User:Bluescreenofdeath/Sinks_and_toilets|There is a list of all possible messages.]]

=== FIQHack ===

In [[FIQHack]] monsters can wear amulets.

==Encyclopaedia entry==

{{encyclopedia|
"The complete Amulet can keep off all the things that make people unhappy -- jealousy, bad temper, pride, disagreeableness, greediness, selfishness, laziness.  Evil spirits, people called them when the Amulet was made.  Don't you think it would be nice to have it?"
"Very," said the children, quite without enthusiasm.
"And it can give you strength and courage."
"That's better," said Cyril.
"And virtue."
"I suppose it's nice to have that," said Jane, but not with much interest.
"And it can give you your heart's desire."
"Now you're talking," said Robert.
|[ The Story of the Amulet, by Edith Nesbit ]
}}

==References==
<references/>

{{DOD}}
[[Category:Amulets| ]]
{{nethack-361}}}
&&%s&& %s Pit {147762 2022-08-21T07:53:52Z {4000978 Aximili} add trap template {{trap
 |name=pit
 |color=darkgray
 |generation=Anywhere
 |effect=Prevents movement, damage
}}
A [[pit]] {{Darkgray|^}} is a [[trap]] consisting of a hole in the ground that is not deep enough to lead to the next level; it opens up and becomes visible when you walk over it.

== Generation ==
Pits may be randomly generated at any dungeon level, anywhere that traps are normally generated, with the exception that they cannot be generated beneath a boulder.{{refsrc|mklev.c|1251|comment= List of traps that cannot be generated underneath a boulder.}}

You can [[dig]] down with a [[pick-axe]], or zap a [[wand of digging]] down on a [[undiggable]] floor; this creates a pit on the square you are standing on. You can also create pits by [[apply]]ing a [[wand of digging]] or a charged [[drum of earthquake]], which will create pits around you.

Pits that you create are effectively the same as randomly generated pits, except that they are recorded as being created by you, and as such will anger [[peaceful]] monsters who fall into them.

==Effects==
Falling into a pit causes 1d6 damage, and will also [[abuse]] [[strength]] and [[dexterity]]; falling into a pit as a [[pit fiend]] or a [[pit viper]] will generate [[YAFM]]. [[Spiked pit]]s can be found as well and use a similar glyph.

While in the pit, any [[light]] source you are carrying will not travel beyond the walls of the pit, and it takes 3-7 [[turn]]s to "climb to the edge" and escape. There is a to-hit bonus when attacking trapped monsters, and a penalty for trapped attackers. [[Flying]] or [[levitation]] can be used to cross pits without falling in, with the exception of those generated on the first floor in [[Sokoban]]; air currents will force the character into the pit, preventing them from flying or floating across to the stairs. A character that dies as a result of this is listed as "killed by dangerous winds".

Pits can be removed by pushing a [[boulder]] into them. Any item the boulder covers will remain undisturbed by monsters until you dig it up again or it rots away.

==Untrapping==
Monsters, including your pets, can be rescued from a pit trap using the #[[untrap]] [[extended command]]. If successful, the monster may become [[peaceful]] if it was previously hostile. [[Lawful]] characters may get a +1 [[Alignment record|alignment]] bonus for helping a monster out of a pit. If the monster "backs away skeptically", try repeating the #untrap command several times.

If the monster cannot go anywhere for lack of space, as in the Sokoban pits, it will likely immediately fall back into the pit. However, killing it this way does not break [[pacifist]] conduct, and having a pet die this way does not [[anger]] your god as killing your pet by displacing it into the pit would.

Some monsters may be too heavy to rescue from a pit, but the attempt to untrap them may still render the trapped monster peaceful.

;"The [[dwarf]] falls into a pit!"
;"You reach for the dwarf. The dwarf is grateful!"
;"The [[ogre lord]] is too heavy for you to lift.  The ogre lord thinks it was nice of you to try."

==Buried objects==
Some of the gold and gems created by the game in solid rock are buried - if any such items found by some form of [[potion of object detection|object]] [[spellbook of detect treasure|detection]] or [[scroll of gold detection|gold]] [[crystal ball|detection]] disappear when the player is adjacent to them, this means they are buried underneath that tile, and the player must dig a pit in that location to retrieve them.

If you drop something into a pit, and then plug the pit with a [[boulder]], the objects become buried and are totally inaccessible to monsters. While a somewhat easier [[stash]]ing method, this is not entirely practical: Organic materials (including [[large box]]es and [[chests]]) will rot away within 250 turns,{{refsrc|dig.c|1324}} and you would need a new boulder for each access.

