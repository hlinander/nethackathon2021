&&%s&& %s Kicking {10005 2006-09-08T04:09:54Z {0 } Redirecting to [[Kick]] #REDIRECT [[Kick]]}
&&%s&& %s Master Kaen {148064 2022-09-05T02:15:29Z {4001279 Umbire the Phantom} /* Lava crossing */* {{monster
 |name=Master Kaen
 |difficulty=31
 |level=25
 |experience=1095
 |speed=12
 |AC=&minus;10
 |MR=10
 |align=&minus;20
 |frequency=Unique
 |genocidable=No
 |attacks=Claw 16d2, claw 16d2, [[monster spell|spell-casting]] (clerical), claw 1d4 [[covetous|quest-artifact-stealing]]
 |weight=1450
 |nutr=400
 |size=Medium
 |resistances=Poison, stoning
 |resistances conveyed=Poison (100%)
 |attributes={{attributes|Master Kaen|humanoid=1|herbivore=1|seeinvis=1|nopoly=1|human=1|pname=1|hostile=1|strong=1|nasty=1|stalk=1|collect=1|magic=1|wantsarti=1|waitsforu=1|infravisible=1}}
 |reference=[[monst.c#line3256]]
}}
{{questmon|Master Kaen|Monk|nemesis}} He guards the [[Bell of Opening]] and the Monk's [[quest artifact]], [[The Eyes of the Overworld]].

==Generation==
Master Kaen has a {{frac|11}} chance of [[Monster starting inventory|being generated with]] a [[cloak of magic resistance]], and will otherwise be generated with a [[robe]].{{refsrc|src/makemon.c|696|version=NetHack 3.6.6}}

==Strategy==
Master Kaen is extremely difficult: he hits hard and often, casts clerical spells, and ignores [[Elbereth]], making him incredibly ferocious in a straight-up fight. Among Kaen's few weaknesses are his [[covetous]] behavior and his lack of key resistances - specifically [[sleep resistance]], [[drain resistance]], and [[disintegration resistance]]. If you lack the means to take advantage of these, you can postpone the Quest until after you have finished the [[Castle]]. A [[luckstone]] and high [[Luck]] may be useful if you want to hit him in melee.

Thankfully, Master Kaen respects the [[scroll of scare monster]], meaning that you only need to place one on the upstairs as soon as you arrive - this will leave him unable to do anything except possibly cast healing spells on himself. From there, you can finish him off however you please, using one of the other strategies listed further below in conjunction with the scroll; [[wand of death|death]] [[finger of death|rays]] should make short work of him, and the stronger attack [[wand]]s (e.g. lightning, fire, or cold) will work nicely as well.

If he generates with the cloak of magic resistance, you can employ your martial arts and/or whatever weapons and projectiles you have available to bring him down; use {{kbd|F}} to ensure you stay on your square while attacking, and watch out for rays from a [[wand of fire]] that can burn the scroll of scare monster up from under you. Grand Master skill [[martial arts]] is your best bet to finish him quickly, and those not committed to [[weaponless]] may consider artifacts like [[Mjollnir]].

If you lack a scroll of scare monster and have no other means of procuring one, the additional strategies discussed in the following sections can help ensure a relatively safe fight against Master Kaen.
{{upcoming|NetHack 3.7.0|The scroll of scare monster no longer works on any @ or unique monster.}}

===Immobilizing Kaen===
The [[spell of sleep]] is enough to render Kaen helpless if he does not have magic resistance, and it is one of the spells that a Monk may start the game with; a [[potion of sleeping]] will also suffice. Be prepared in case you miss (e.g. multiple potions), and be prepared to put him under again if he wakes up before you finish him off. Throwing a [[potion of paralysis]] or (preferably) attacking with a wielded potion while wearing a [[ring of free action]] is also viable.

===Boulder fort===
Reading a noncursed [[scroll of earth]]&mdash;preferably blessed and on the upstair&mdash;will create a safe barrier around you that Master Kaen cannot cross, leaving you free to use any projectiles, spells or wands. As Kaen lacks long-range attacks, your main hazards will be the [[xorn]]s and [[earth elemental]]s that can phase through the rocks (though they both respect [[Elbereth]]). Attack wands used by other hostiles can fire past boulders easily, and a [[wand of striking]] can destroy boulders and leave an opening for Kaen - be careful not to push one out by accident!

===Lava crossing===
Similarly, you can use fireproof [[water walking boots]] or [[levitate]] over the lava; you should have intrinsic [[fire resistance]] at this point from reaching XL 11, and should also fireproof your inventory as well. You can use ranged attacks and attack wands from this position, while preventing Kaen from reaching you and restricting him to the [[cure self]] and [[summon insects]] [[monster spell]]s at that distance. Beware of any items or attacks that can compromise your ability to lava-walk or levitate, e.g. lightning destroying your [[ring of levitation]]!

===Drain life===
Use the {{spell of|drain life}} spell until he croaks. It is a good idea to do this on the level above and when he teleports away (to heal the modest HP damage that drain life does on top of the draining effect), go downstairs to heal yourself, preferably on a burned Elbereth. Eidolos uses this method for his instructional [[ttyrec]] [http://groups.google.com/group/rec.games.roguelike.nethack/msg/9e49acd70618cbd6 posted on RGRN]; the ttyrec can be found [http://alt.org/nethack/getoldttyrec.php?player=Eidolos&fname=2006-05-22.02:01:07.ttyrec.bz2 here].

===Polymorphing yourself===
Even if Master Kaen generates with a cloak of magic resistance, he is not immune to [[disintegration]]. [[Polymorph control|Controlled polymorphing]] into a [[black dragon]] and using [[Monster (command)|#monster]] can kill him very quickly and easily, though his exceptionally low AC gives him a decent chance of dodging the first few breath attacks.

Whatever your form, your priority when using polyself should be to position yourself at the appropriate distance first (e.g. using the black dragon's [[flight]] to take advantage of the lava) before attacking with what ranged options you have. You can establish your boulder fort prior to changing forms, which trades preparation time and resources for much less risk.

If you elect not to pair this with unchanging, have a backup plan of escape or attack ready if you revert to normal form or are reduced to 0 HP while polymorphed&mdash;having a backup source of levitation that isn't affected by your polyself is recommended if you plan to use the lava as a defense.

===Polymorphing Master Kaen===
Master Kaen has no resistance against being polymorphed other than his low MR, so a couple of zaps from a [[wand of polymorph]] should suffice. Bashing him with a [[potion of polymorph]] may also work, but you'll want to have extras or a backup plan in case he resists the first. Whatever he transforms into will most likely be less dangerous than his original form, but there's a small chance of getting something like a [[titan]] or [[arch-lich]] that's a threat in its own right, and has enough MR to resist being polymorphed again.

If you use the wand, note that if Master Kaen hasn't awakened and picked up the Eyes yet, there's a 5% chance of them being polymorphed and destroyed. This can also happen if Master Kaen dies of [[system shock]].

===Melee===
You can fight Kaen mano-a-mano if all else somehow fails - this is not recommended due to Master Kaen's AC and powerful base damage, though sufficiently advanced players have managed to defeat him this way. If you decide to go this route, make sure you have very high health, low AC, and [[half physical damage]] if at all possible.

==History==
Master Kaen first appears alongside the Monk role and quest in [[NetHack Plus]]; all are introduced to vanilla ''NetHack'' in [[3.3.0]].

In [[NetHack 3.4.3]] and earlier versions, as well as some variants based on those versions, Master Kaen was not affected by the scroll of scare monster, and additionally gained magic resistance from carrying The Eyes of the Overworld, rendering most magic ineffective against him as soon as he picked it up.

Master Kaen's vulnerability to the scroll of scare monster was added in [[NetHack 3.6.0]].

==Variants==
===SLASH'EM===
In [[SLASH'EM]], where the Monk role originated, Monks have a much better chance against Master Kaen through liberal use of [[technique]]s: through combinations such as [[chi strike]] plus [[elemental fist]] plus [[pummel]], you can even kill him in a single round of melee. A quaffed [[potion of invulnerability]] in particular can turn the fight into a cakewalk.

===EvilHack===
In [[EvilHack]], Master Kaen does not respect the scroll of scare monster, and has a second 16d2 "claw" attack; it can knock the target back one or two squares much like the melee attacks of player and non-player Monks (including your [[quest leader]] and [[guardian]]s). To make matters worse, a majority of the goal level is composed of lava, introducing the possibility of being sent flying into a certain doom if you are in the wrong place at the wrong time.

==Encyclopedia entry==
Master Kaen shares his encyclopedia entry with the monk.

{{encyclopedia|
One day, an army general invited the Buddhist monk I-Hsiu
(literally, "One Rest") to his military head office for a
dinner.  I-Hsiu was not accustomed to wearing luxurious
clothings and so he just put on an old ordinary casual
robe to go to the military base.  To him, "form is void".

As he approached the base, two soldiers appeared before him
and shouted, "Where does this beggar came from?  Identify
yourself!  You do not have permission to be around here!"

"My name is I-Hsiu Dharma Master.  I am invited by your
general for a supper."

The two soldiers examined the monk closely and said, "You
liar.  How come my general invites such a shabby monk to
dinner?  He invites the very solemn venerable I-Hsiu to our
base for a great ceremony today, not you.  Now, get out!"

I-Hsiu was unable to convince the soldiers that he was
indeed the invited guest, so he returned to the temple
and changed to a very formal solemn ceremonial robe for
the dinner.  And as he returned to the military base, the
soldiers observed that he was such a great Buddhist monk,
let him in with honour.

At the dinner, I-Hsiu sat in front of the table full of
food but, instead of putting the food into his mouth, he
picked up the food with his chopsticks and put it into
his sleeves.  The general was curious, and whispered to
him, "This is very embarrassing.  Do you want to take
some food back to the temple?  I will order the cook to
prepare some take out orders for you."  "No" replied the
monk.  "When I came here, I was not allowed into the
base by your soldiers until I wear this ceremonial robe.
You do not invite me for a dinner.  You invite my robe.
Therefore, my robe is eating the food, not me."
|[ Dining with a General - a Zen Buddhism Koan ]
}}

==External links==
* [http://www.steelypips.org/nethack/monk_faq.html The Monk FAQ]

==References==
<references/>
{{nethack-366}}}
&&%s&& %s Dark One {144600 2022-02-23T12:25:32Z {4001279 Umbire the Phantom} /* Variants */ Add UnNetHack {{monster
 |name=Dark One
 |difficulty=20
 |level=15
 |experience=498
 |speed=12
 |AC=0
 |MR=80
 |align=-10
 |frequency=Unique
 |genocidable=No
 |attacks=Weapon 1d6, Weapon 1d6, claw 1d4 [[covetous|quest-artifact-stealing]], [[monster spell|spell-casting]]
 |weight=1450
 |nutr=400
 |size=Medium
 |resistances=Stoning
 |resistances conveyed=None
 |attributes={{attributes|The Dark One|humanoid=1|omnivore=1|nopoly=1|human=1|strong=1|hostile=1|stalk=1|nasty=1|collect=1|magic=1|wantsarti=1|waitsforu=1|infravisible=1|nocorpse=1}}
 |reference=[[monst.c#line3321]]
}}

The {{questmon|Dark One|Wizard|nemesis}} He is widely considered to be one of the easiest nemeses to defeat.

==Strategy==
Many of his spells will be ineffective against a wizard with [[magic resistance]]. Although the [[Eye of the Aethiopica]] confers magic resistance when worn, monsters will not wear amulets of ESP, so you are free to use [[wands of death]] or the [[finger of death]] spell on him. However, his high monster MR makes him likely to resist other effects such as [[sleep]] rays or [[polymorph]] beams.

Like most [[covetous]] monsters, The Dark One should be fought from the [[upstair]]s, but preventing him from doing so can be a bit difficult without a means of [[teleport control|controlled]] [[teleport]]ing. A [[scroll of earth]] can be very useful in that case - read it after you get to this level and move one boulder onto the stairs. Another possibility is to teleport and take his place on the upstairs.

If generated at level 16 or higher, the Dark One will be able to [[summon nasties]], so if this is likely have a plan for crowd control or even escape ready.

==History==
In [[NetHack 3.4.3]] and earlier versions, as well as variants based on those versions, carrying the Eye was enough to grant magic resistance; this makes [[spellbook of magic missile|magic missile]] and the finger of death (or wand of death) completely ineffective.

===Strategy===
The Dark One tends to place greater priority on healing than picking up the Eye, so a wizard that can approach him [[stealth]]ily and hit him hard (e.g. with a reflected magic missile) can force him to warp to the upstairs and leave the Eye of the Aethiopica free to take. Make sure to stash it in a [[bag]] to prevent him stealing it back. His level also allows teleporting, so you can also sneak attack him and grab the Eye after he teleports, then either teleport near the upstair to unload spells on him - or else simply zap him with a wand or finger of death.

==Variants==
===xNetHack===
[[xNetHack]] changes the name of the Dark One to '''Anaraxis the Black''' and gives him his own [[cloak of magic resistance]].

===UnNetHack===
[[UnNetHack]] also changes the Dark One's name to Anaraxis the Black, though it does not give him any additional items.

==Origin==
The encyclopedia entry implies that the Dark One is in fact Sauron, the chief antagonist of ''[[wikipedia:Lord of the Rings|Lord of the Rings]]''.

==Encyclopedia entry==

{{encyclopedia|
... But he ruled rather by force and fear, if they might
avail; and those who perceived his shadow spreading over the
world called him the Dark Lord and named him the Enemy; and
he gathered again under his government all the evil things of
the days of Morgoth that remained on earth or beneath it,
and the Orcs were at his command and multiplied like flies.
Thus the Black Years began ...
|[ The Silmarillion, by J.R.R. Tolkien ]
}}

{{nethack-366}}}
&&%s&& %s Savescum {10042 2006-09-08T16:22:37Z {239 Eidolos} Redirect to [[Save scumming]]. #REDIRECT [[Save scumming]]}
&&%s&& %s Savescumming {10043 2006-09-08T16:23:15Z {239 Eidolos} Redirect to [[Save scumming]]. #REDIRECT [[Save scumming]]}
&&%s&& %s Save scum {10045 2006-09-08T16:24:57Z {239 Eidolos} Redirect to [[Save scumming]]. #REDIRECT [[Save scumming]]}
&&%s&& %s Startscum {10046 2006-09-08T16:30:22Z {239 Eidolos} Redirect to [[Start scumming]]. #REDIRECT [[Start scumming]]}
&&%s&& %s Startscumming {10047 2006-09-08T16:30:25Z {239 Eidolos} Redirect to [[Start scumming]]. #REDIRECT [[Start scumming]]}
&&%s&& %s Start scum {10048 2006-09-08T16:30:32Z {239 Eidolos} Redirect to [[Start scumming]]. #REDIRECT [[Start scumming]]}
&&%s&& %s Start scumming {124941 2018-12-26T23:14:07Z {4000227 Kufat} Mainline NH now offers zen option '''Start scumming''' (or ''startscumming'') is the act of immediately [[quit]]ting characters that do not meet some arbitrary criteria. [[Wizard]]s are most often the victim of this [[scumming]] behavior, due to their useful starting magical equipment. For example, a player may startscum Wizards looking for a very good starting spell (such as {{spell of|identify}} or {{spell of|magic missile}}). Every [[role]] is startscummed to some extent, even those who receive no random [[equipment]], because sometimes players demand unusually high starting [[stats]].

Many experienced players consider startscumming to be [[Cheating#degenerate_behavior|degenerate behavior]] and recommend that new players not do it, saying it will not help them learn how to play the game with weaker characters.

Startscumming for specific items is sometimes a necessary or very important part of [[conduct]]s: for instance, a [[SLASH'EM]] [[Zen]] player needs to start with a blindfold to be able to attempt the conduct, and a gametime [[speedrun]] will be extremely difficult without a [[tonal instrument]]. Most players do not consider this kind of startscumming to be abusive.

On [[nethack.alt.org]], startscumming has been defined as a [[quit]] or [[escape]] with less than a thousand [[points]]. This is by no means a perfect definition, as players sometimes commit suicide instead of quitting, and sometimes players quit or escape with no intention of scumming (such as when they accidentally choose the wrong [[role]]).

Many NAO scripts that generate stats based on the [[logfile]] (including [[Rodney (bot)|Rodney]]'s death announcements) ignore startscums as they have defined them. This is partly because about 34% of games on nethack.alt.org fall under their definition of startscumming; more than half of those scums are Wizards.

{{stub}}
[[Category:Cheating]]}
&&%s&& %s Category:Cheating {86473 2013-08-01T16:50:36Z {4000123 DoubleU}  This category is for the dubious exploitation of [[bugs]], abuse of game mechanics, and other behaviors that are generally frowned upon. If it's unclear as to whether a behavior falls under the term [[cheating]], it should probably be included anyway.

[[Category:Strategy]]}
&&%s&& %s The Grid Bug's Fane {144312 2022-02-02T11:38:28Z {4001279 Umbire the Phantom}  The names of those who contributed their angstiest lines in realtime over [[IRC]] have been omitted to protect the guilty. NetHackWiki accepts no responsibility for brain damage or bleeding around the eyes which may occur while reading this poem.

----

 In the dark dungeons of NetHack
 My soul unwinds
 Slain by a grid bug
 My heart like a cursed bag of holding
 And your tainted love was like a wand of cancellation
 I wished for happiness
 But all I got was a woodchuck
 
 Rest in peace Hachi
 Killed by a falling rock trap
 Stupid fucking dog
 
 Happiness not for sale
 Asidonhopo the purveyor of my misery
 Love stolen away in the night
 Gremlins sear my breast
 My scrolls of light are all cursed
 Aggravate monster
 All my pets go feral
 Even Sting blasts me
 
 No beauty in the dungeon
 No flowers here
 Only fungus shall adorn my grave
 Life is HP loss
 Every moment weighs me down like a loadstone
 My breaths like scrolls of punishment
 Oh sweet Aleax
 Come release me from this torment
 I put off my amulet of life saving
 
 The Wizard looms; he comes for me.
 Oh! Raise me not as a zombie
 I long for the pit's embrace.
 
 Save me not with the bell.

----

Don't say you weren't warned.
{{noversion}}
[[Category:Literature]]}
&&%s&& %s Category:Literature {10076 2006-09-08T20:51:13Z {396 Jayt} [[Category:Community]] This category is for literary works based on NetHack.

[[Category:Community]]}
&&%s&& %s Smoky and milky potions {148047 2022-09-02T14:15:07Z {4001279 Umbire the Phantom} slight copyedit '''Smoky and milky potions''' are two of the randomly generated colors of [[potion]]; they can be any type. However, they are noteworthy because they have a chance of summoning a monster  upon [[quaff]]ing: the smoky potion may summon a [[djinni]] and the milky potion may summon a [[ghost]].  If the monster appears, the potion does not have its normal effect.

==Smoky potions==
Quaffing a smoky potion has a {{sfrac|1|13 + 2<var>n</var>}} chance of producing a djinni, where <var>n</var> is the number of djinn that have been created in this game.{{refsrc|src/potion.c|553|nethack=3.6.6}}{{refsrc|include/hack.h|440|nethack=3.6.6}} This djinni might grant you a [[wish]], become [[tame]], be peaceful, vanish instantly, or turn hostile; the chances of each outcome depend on the [[beatitude]] of the potion and are identical to the chances for [[magic lamp]]s. Blessed smoky potions are the most likely to give a wish.{{refsrc|src/potion.c|2321|nethack=3.6.6}}

The effect of quaffing a smoky potion does ''not'' depend on whether or not you have [[identification|identified]] that type of potion. If you have identified smoky potions but have forgotten which ones they are, you can use {{kbd|\}} or {{kbd|`}} to check your current identification knowledge.

Djinn can also be summoned when a monster quaffs a smoky potion. The djinni will disappear 50% of the time; the other 50% it will be peaceful. In neither case will it grant wishes, though it does count toward the total number of djinn created.{{refsrc|src/muse.c|106|nethack=3.6.6}}

===Chance of producing a djinni===

{| class="prettytable"
! colspan="2" | Djinn already created !! 0 !! 1 !! 2 !! 3 !! 4 !! 5 !! ''n''
|-
! colspan="2" | Chance of producing a djinni
| 7.69% || 6.67% || 5.88% || 5.26% || 4.76% || 4.35% || {{sfrac|1|13 + 2''n''}}
|-
! rowspan="3" | Overall chance of wish
! Blessed
| 6.15% || 5.33% || 4.71% || 4.21% || 3.81% || 3.48% || {{sfrac|4|65 + 10''n''}}
|-
! Uncursed
| 1.53% || 1.33% || 1.18% || 1.05% || 0.95% || 0.87% || {{sfrac|1|65 + 10''n''}}
|-
! Cursed
| 0.38% || 0.33% || 0.29% || 0.26% || 0.24% || 0.22% || {{sfrac|1|260 + 40''n''}}
|}

==Milky potions==
Milky potions have a chance of containing a hostile ghost; unless you are blind when you quaff the milky potion, you will be "are frightened to death, and unable to move" for three turns.{{refsrc|src/potion.c|465|nethack=3.6.6}} As with djinn, the probability of a milky potion generating a ghost is based on the number of ghosts already generated by any means: {{sfrac|1|13 + 2<var>n</var>}}, where <var>n</var> is the number of ghosts already generated. Since there will always be a large number of ghosts in the [[Valley of the Dead]], the chance of getting a ghost from a potion decreases significantly after that point.

A monster quaffing a milky potion can also summon a ghost, paralyzing them for 3 turns.{{refsrc|src/muse.c|80|nethack=3.6.6}}

==Strategy==
===Smoky potions and wishing===
Because of the possibility of a wish, it is worth blessing and quaffing all smoky potions, even if they are an otherwise useless or harmful type, especially because harmful potions are less harmful when blessed. In some cases, however, precautions must still be taken; the table below outlines these cases and what can be done to mitigate their effects:

{|class="prettytable striped sortable"
!Potion !!Cost !!class=unsortable|Blessed result !!class=unsortable|Mitigation
|-
|{{! of|sickness}} || 50 || Lose 1 HP, abuse Con || Quickly recovered
|-
|{{! of|confusion}} || 100 || Confusion, abuse Con || [[Unicorn horn]], or just wait (it's quite short)
|-
|{{! of|hallucination}} || 100 || Hallucination || Unicorn horn
|-
|{{! of|sleeping}} || 100 || Sleep || [[Sleep resistance]]
|-
|{{! of|blindness}} || 150 || Blindness || Unicorn horn
|-
|{{! of|invisibility}} || 150 || Permanent invisibility || Wear [[mummy wrapping]]
|-
|{{! of|polymorph}} || 200 || Polymorph || [[Unchanging]] or [[polymorph control]]
|-
|{{! of|levitation}} || 200 || Levitation|| Press {{kbd|>}} to float gently to the ground
|-
|{{! of|acid}} || 250 || Lose 1&ndash;4 HP, abuse Con || [[Acid resistance]] or recover
|-
|{{! of|oil}} || 250 || Abuse Wis || Quickly recovered
|-
|{{! of|paralysis}} || 300 || Paralysis || [[Free action]]
|}

Probably the worst of these is the potion of polymorph, since its effect is not easily resisted and can be quite devastating if proper precautions are not taken. Unchanging is preferable to polymorph control: controlled polymorph into your own race will shuffle your stats, while choosing to polymorph into another monster may keep your stats the same but will break polyselfless conduct.  With unchanging, neither of these is an issue.

In the case of potions of sleep and paralysis, a locked closet with a burned Elbereth square or scroll of scare monster is a reasonably secure substitute: almost all phasing, digging or door-destroying monsters respect Elbereth, although the latter two may open the way for non-Elbereth respecting monsters. A [[sanctuary]] is an even better substitute, although still not as good as free action since [[angelic being]]s may still attack you.

===Alchemy===
Another problem can occur if smoky potions are {{! of|healing|or=1|extra healing}}, since players generally want to alchemize these to {{! of|full healing}}. The dilemma posed is such: get more HP, or get a wish? In this case, one should go for the alchemy - on average, for the potions required to get one wish, you will get 45 extra HP if smoky potions are extra healing, and 105 extra HP if smoky potions are healing. The extra HP is pretty much always better in the latter case, and usually better in the former case, especially given that many items can be obtained without wishing.

===Combat===
Both of these potions can be dangerous to players in tense situations. The milky potion effect is far worse across the board: three turns of paralysis can be deadly against particularly nasty monsters, particularly if the potion was full healing. The paralysis effect can be avoided by [[blind]]ing yourself. The smoky potion effect, while beneficial on paper, robs you of that potion's effect, which can be fatal - e.g., at low health, your only smoky potion of full healing produces a wish-less djinni instead.

==Variants==
===UnNetHack===
{{main|Wish#UnNetHack}}
In [[UnNetHack]], wishes cannot be used on magical items unless they are from a [[wand of wishing]].

===EvilHack===
In [[EvilHack]], monsters can wish for items if the smoky potion they attempted to quaff produces a djinni that grants a wish.

==External links==
*[http://nh.gmuf.com/wish.html Wishing spoiler]

==References==
<references/>
{{nethack-343}}
[[Category:Potions]]}
&&%s&& %s Upstair {10075 2006-09-08T20:33:55Z {509 Lotte} oops #REDIRECT [[Staircase]]}
&&%s&& %s Puddingbane {134680 2020-07-02T02:57:47Z {4001419 Uchronia}  '''Puddingbane''' was a nickname for a -3 small iron weapon (normally a dagger, orcish dagger, or knife) that was used for [[pudding farming]] before [[NetHack 3.6.0]]. Its damage is always just 1.

Today, the primary use of a weapon like this is to help maintain [[pacifist]] conduct. Another possible use is to split a pudding pet before polymorphing it.

==History==

Historically, a poor iron weapon was used to split [[black pudding|black]] and [[brown pudding|brown]] puddings in [[pudding farming]] (hence its name) while doing minimum damage: it might eventually kill a pudding, but it would split a lot of them first.

Prior to version 3.6.1, a Puddingbane could probably have been used to kill [[Vlad the Impaler]] (as a makeshift Vladbane).

==Creation==
A puddingbane can be created by [[engrave|engraving]] with an iron weapon to reduce its enchantment to -3. An enchantment of less than -3 is not needed for a dagger or knife, but a stronger or blunt weapon would require some cursed scrolls of enchant weapon.

==Mechanics==
[[Strength]] is not added to a damage roll of 1 after [[enchantment]], so with a -3 (or less) dagger or knife, the damage will still always be 1 regardless of strength. [[erosion|Corroding]] is optional.

Any non-weapon iron item, such as a key, will do d2 damage (or at least 1 if corroded), plus any bonus from [[strength]] of 16 or more or from [[ring of increase damage|rings of increase damage]]. Note that for pacifism, this is not as good as a -3 dagger or knife, which will always do 1 point of damage no matter what your damage bonus. Wielding a non-weapon item will preserve [[weaponless]] conduct, however.

==[[SLASH'EM]]==
In slashem, a Puddingbane can still be used for some very limited [[pudding farming]].

==See also==
*[[The Banes]], a group of artifact weapons
*[[pacifist]]
*[[black pudding]]
*[[brown pudding]]

*[[pudding farming]]
*[[expert pudding farming]]

[[Category:Strategy]]
[[Category:History]]
{{noversion}}}
&&%s&& %s YASD {10088 2006-09-08T23:46:09Z {761 Someone Else} [[YASD]] moved to [[Yet Another Stupid Death]]: Non-acronymed page names, in my opinion, are better. #REDIRECT [[Yet Another Stupid Death]]}
&&%s&& %s PYEC {10122 2006-09-09T14:38:03Z {467 Killian} Redirect #REDIRECT [[The Platinum Yendorian Express Card]]}
&&%s&& %s Speed ascension {148004 2022-08-29T15:56:55Z {4001042 Bleem} /* How fast is fast? */ 3.7.0: can kill quest leader to enter quest before t:2000 A '''speed ascension''', informally known as a '''speedrun''', is a type of informal challenge common in many video games. In ''[[NetHack]]'', it is an informal [[conduct]] and may refer to either low turn-count ascensions or short real-time elapsed ascensions (which tend to be low in turn-count). This article does not reflect the state of the art. The best learning tools are [[Maud]]'s [[ttyrec]]s on [[NAO]].

==How fast is fast?==
First ascensions vary greatly in turn-count, most of them falling between 50,000 and 100,000 turns. A careful, well-spoiled player can ascend in under 50,000 turns in most roles, and ascensions below 30,000 are not uncommon. Anything below 20,000 probably counts as a speed ascension. On [[NAO]], 1% of all winning player accounts have an ascension below 10450 turns, and 10% have one below 24450. No ascension is possible in less than 2000 turns in [[vanilla|vanilla NetHack]], since this is the minimum number of turns it takes for a character's [[alignment record]] to reach 20, a requirement for entering the [[Quest]].

{{upcoming|NetHack 3.7.0|You may enter the [[Quest]] before turn 2000 by killing your [[Quest#Quest_leaders_and_nemeses|Quest Leader]], skipping the alignment record requirement. Beware that this incurs a penalty of +7 [[anger]] and -20 [[Luck]].}}

Real-time speed records are very hard to determine, since vanilla [[NetHack 3.4.3]] does not track real time elapsed. The usual method is to time the [[ttyrec]] of the game with a utility such as [http://www.stack.nl/~jilles/games/ timettyrec]. The [[xlogfile]] patch also tracks the real time elapsed in a game. 

Certain roles are better than others at the very fastest ascensions, though any role can be ascended relatively quickly. Good spellcasting ability and being able to get [[the Eye of the Aethiopica]] are both very handy in a turncount speedrun, making [[wizard]]s and [[neutral]] [[monk]]s the two roles that have pushed speed ascensions the furthest. For a realtime speedrun, dwarven [[valkyrie]] is preferred for being the strongest role overall.

==General speed strategy==
Risk management is very different from normal games. In normal play, you avoid only death. But in speed games, delay is as bad as death. The challenge is how pervasive any good player's risk management habits are.

* Don't be a pack rat.
* Don't fully explore every level.
* Become [[very fast]] as soon as possible.
* Avoid monsters rather than fighting them.
* Avoid being [[encumbrance|encumbered]] to any degree.
* Make extensive use of [[digging]] and [[Level teleport|level teleportation]].
* Get as many scrolls as you can. You will write boatloads of charging scrolls.

==Specific speed tactics==
* Move [[Movement tactics#Diagonal movement|diagonally]].
* Kick down doors if you arrive diagonally (be careful in [[Minetown]]!)
* Wear a [[ring of conflict]].
* Wear a [[ring of regeneration]] while polymorphed into a strong fighter form ([[master mind flayer]], [[minotaur]], [[jabberwock]], [[titan]],...).
* Wish for [[the Eye of the Aethiopica]].
* Use [[jumping]] and a [[helm of opposite alignment]] to reduce time spent on the [[Astral Plane]]; the latter also can help against the [[mysterious force]].
* Controlled [[Polymorph#Self-polymorph|polymorph self]] into a [[xorn]] to phase through the [[Castle]] walls.
* Controlled [[Polymorph#Self-polymorph|polymorph self]] into a [[master mind flayer]] and use #monster to wake the [[Wizard of Yendor]] from outside his tower, or use a [[drum of earthquake]]. At the very least, [[levelport]] within his tower.
* After retrieving the [[Amulet of Yendor]], convert to chaotic to minimize the effects of the [[mysterious force]].
<!-- Having a [[covetous]] monster (e.g. [[Asmodeus]] or [[Orcus]]) fetch the amulet for you doesn't work anymore in 3.6.0 -->
<!-- Teleporting into the Sanctum as of 3.6.0 is limited to the right side of the map making it a much less useful strategy -->

==Conserving resources==
Assume a chaotic elven wizard, game-time speed run.

Every game is a bit different because you have to make do with what scarce resources you find. Player skill and creativity will open up more options, so you can scrape by on less. Not all of these suggestions will match your game - if you follow all of them, you will be too slow. Usually, obtaining [[scroll]]s limits how fast your [[Option#bones|no-bones]], polyself-based speed runs can be.

===Obtaining resources===
* [[Shop]]s, on your way down to the [[Castle]], are the best source of scrolls and general resources. [[Telepathy]] is the best way to detect them since it lets you eliminate junk stores, nurses, and [[aligned priest|priests]]. If you lack ESP, it is definitely worth [[magic marker|writing]] a [[spellbook of detect monsters]]. You can [[Shopkeeper#Ways to kill shopkeepers easily|kill a shopkeeper]] to identify healing potions and for the money, but watch your [[alignment record]].
* The [[graveyard]]s in the [[Valley of the Dead|Valley]] and the vampire niches in [[Vlad's Tower]] are the second best sources. Beware the Valley takes some 600 turns of pure fighting. (You can skip it by phasing or level teleporting.)
* A [[light source]] will reveal more loot while digging to the Castle.
* [[potion of object detection|Object detection]], [[unholy water]], and a rare [[wish]] make [[fountain]] dipping marginally worthwhile. [[potion of object detection|Object detection]] is important if you cannot [[phasing|xorn]] into the Castle because you usually can sprint once over the courtyard, but not always again. Or it can detect shops for you.
* [[Wands of digging]] come from [[minotaur]]s. You might want controlled teleportation and the sleep spell to harvest them.
* A few items can be found in the [[big room]], the [[Castle]] stores, [[Orcus-town]], [[Minetown]], the [[wizard quest|quest locate]] and end levels. Quaff spare object detection here.

===Scrolls and marker charges===
* Protect scrolls from fire damage. If you don’t find a [[bag]], drop a few tools on your [[polypiling]] heap. It’s worth putting lightweight tools on [[autopickup exceptions]], but generally more than a few steps lugging the large boxes in the Valley of the Dead is too slow.
* Polypile spellbooks instead of writing (all of) them. Good sources are shops, containers during the long dig and in the Valley, and the priest of Moloch, but not the Oracle statues. You may have to write identify and sleep first, for the other items you polypile and to help kill the priest. As a rule of thumb, you want {{spell of|confuse monster}}, {{spell of|magic mapping}}, {{spell of|identify}}, {{spell of|healing}}, {{spell of|sleep}}, {{spell of|haste self}}, {{spell of|remove curse}}, {{spell of|detect monsters}}, {{spell of|jumping}}. Either press on to [[Juiblex's swamp|Juiblex]] or carry some water to blank and write the last missing books.
* Read very few identify scrolls – use-identify those rare things that really cannot wait until you get [[spellbook of identify|the spell]]. Often, [[price identification|pricing]] is enough to know what you want to keep beyond mere polyfodder: All $300 rings plus $200 for regeneration and teleportation, $150 potions for object detection, [[Gem#By color|real gems]], …
* Before [[Genocide#Reverse genocide|reverse genociding]] [[wraith]]s, level up by fighting in places you visit anyway. The [[drawbridge]], mines dwellers, Keystone [[Kop]]s, and the Valley graveyards are good places. Level 11 seems to be the maximum reasonable.
* Level up for a large power pool before reading confused charging. Most likely, you will have to level up anyway for the quest and [[teleport control]].
* Keep your Luck up so you can reliably [[levelport]] with confused scrolls, among other things. Reverse genocided [[black unicorn|unicorns]] are the means of choice. Unless you can already get that done in the shop robbing phase, a good place is between the castle trapdoors and chambers. They are easy to corner in the chambers, and you can later throw a gem in passing at those that fall into the Valley. You could also sacrifice the copious vampire bats in the quest, but unicorns in the Valley are faster.
* Zap digging down instead of levelporting short distances (if diggable). This way, you also create the bribable demons between the Valley and Vlad’s stairs (prior to having the Amulet), and you can eat the [[tengu]] in the wizard quest if necessary. If you have the time for a detour to the [[Minetown#Maps|candle shop]], digging to the quest portal allows you to check for stores you missed the first time. However, levelporting is faster.
* Genocide dragons only if and when you’re facing one without reflection.
* [[scroll of gold detection|Gold detection]] for the portals can be replaced with {{spell of|detect unseen}}, but that slows your game.

{{todo|typical number of scrolls needed. Fire damage, unsuccessful writes, revgeno, charging wands and markers, recharging power, trap detection.}}

===Charges of polymorph===
One wand can last an entire speed run if you recharge it. This includes emptying it once for polypiling.
* [[Hit and run]], and retreat tactically to avoid getting surrounded or walking into attacks. That way, your monster form hit points last longer.
* A [[ring of regeneration]] and a [[spellbook of healing|healing spell]] both raise your abysmal polymorphed healing rate. You need at least one, and both are worth polypiling for.
* A [[ring of polymorph]] can morph you into utility forms a couple of times if you plan ahead. You still need a wand for combat and polypiling.
* [[Polypile]] large piles, in one zap down, after maximizing your [[Luck]] to cut down on golem creation. A [[bag of holding]] only matters for how much polyfodder you can carry until you have to zap. (Polypile when you have enough fodder, don’t wait until you are in the perfect place. Although stores and the Valley altar are good spots.)

===Power===
* [[Teleport]] by reading a [[cursed spellbook]]. Write {{spell of|detect monsters}}, {{spell of|light}}, {{spell of|sleep}}, or {{spell of|knock}} with a cursed magic marker after you have learned all the spells you need.
* The [[robe]] from the [[Valley of the Dead|priest of Moloch]] will let you cast magic mapping without first grinding up divination to [[skilled]]. When you do grind, identify polypiling results.
* Walk down stairs if nearby so you won’t have to magic map the next level.
* After the Invocation, instead of [[gehennom mapping|mapping]] what you levelported past, you can chase a lich up. Kick it when it’s in low health. The [[Sanctum]] and the [[Fake Wizard's Tower]]s often have a few. However, don’t let it on a series of non-teleport levels, such as Rodney’s Tower or the Valley.
* Collect [[egg]]s to confuse yourself with, especially before you learn confuse monster. Have a "waiting task" ready, though.
* Retrieve [[the Eye of the Aethiopica]] early. But ideally you have completed everything else when the quest unlocks.

===Wishes===
Wishes will usually be first for one polyself kit, then for [[magic marker]]s, as many cursed [[potion of gain level|gain level]] as you can afford, and perhaps a [[chickatrice]] corpse on the [[Astral Plane]].
* You could [[Start_scumming |start-scum]] for things you would otherwise wish for, but it isn’t clear if this is a good idea. Perhaps combinations that let you locate and [[Stealing_from_shops |rob]] shops quickly are better, such as digging and charging, teleport control and teleportation, etc.
* [[Engrave]] with your [[wand of wishing]] because it might get cursed and explode if zapped, and keep track of your [[Luck]].
* [[Polypile]], obviously. Primarily [[spellbook]]s and [[ring]]s, but also junk [[wand]]s (for [[wand of cancellation|cancellation]], [[wand of digging|digging]], and [[wand of death|death]]), mundane [[tool]]s (for a [[sack]] and some essentials), magic armor (for [[speed boots]], [[jumping boots]], [[helm of opposite alignment|opposite alignment]]), amulets (reflection).
* Postpone wishes until you really need them – you might find what you need, or come up with a different solution. Few things have more impact on the ascension than wished-for, cursed potions of gain level.
* [[Candle]]s from [[mine town]], provided you can dig, teleport, level teleport, and have the scrolls to spare. In contrast, going there in the early game means trading some 800 turns for not much more than the 18% chance of a [[magic lamp]], which is hard to bless.
* [[Neferet the Green]] will wander off her [[throne]] if you say no when asked if you really want to attack her.
* Bring a stoning corpse to the [[Astral Plane]]. The Castle army has [[gloves]].

===Potions===
Generally, you care about gain level, unholy and holy water, various healing potions, and (above the Castle) object detection. Potions are not precious, and very heavy. They are still worth quaff-testing, though. You can make plain water for mobile or emergency scroll blanking, using moats, your unihorn, or random alchemy.

===Food===
Avoid eating corpses because it is slow. On the ascension run, you might want to carry a few food rations for self-teleport. (Autopickup will provide plenty during the Castle fight.) In emergencies, you can polyself into a master mind flayer to gain nutrition.

==Realtime strategy==
Since most games that have a low turncount are usually also fast, many of the above strategies also apply to realtime speedruns. However, since turns to castle completion is no longer an issue, dwarven valkyrie is an easy pick, as we want the strongest role possible to minimize the effect of movement inaccuracies on our survivability.

The early game will be spent looking for a pick-axe and a way to clear the castle, which can be anything from a polyself kit, levitation and reflection, conflict, or a tonal instrument. Consider completing [[Sokoban]] if you find yourself lacking. The Sokoban prize will likely be useful to you, and the four rings and wands have a chance at helping you with the castle problem. Sokoban does use up a large chunk of time, but ascending in under two hours is still possible with Sokoban complete.

The advice on spellcasting above will not apply. Valkyries will need to formally identify scrolls they need to write.

Keep in mind that [[Medusa's Island]] gives you a chance at both reflection and levitation. Pick up a towel or blindfold, and if possible, map the level below Medusa after to reduce your chances of running into a [[minotaur]] on your way to the staircase.

Once the castle is cleared, you can start making wishes. It is not advised to use a polyself kit in realtime speedruns in lieu of levitation or proper armor simply because it's easy to make deadly misinputs with a bite or tentacle attack on a [[cockatrice]] or the [[Riders]], or run out of polyform health at an inappropriate time. Invest in your character's survival first with magic resistance, a ring of conflict, a source of levitation, and [[scroll of genocide|scrolls of genocide]] before considering time savers like a ring of teleport control or scrolls of magic mapping. Keep in mind that cursed potions of gain level are less important in Gehennom because travel between stairs is very fast, but the helm of opposite alignment is worth a wish if you have one, as it mitigates the effect of the force as well as saves time finding the correct altar on the [[Astral Plane]].

==List of notable speed ascensions==
Below is a non-exhaustive list of speed ascensions for each category.

===Turn-count speed ascensions===
* An 8683-turn ascension by marvin: [http://groups.google.com/group/rec.games.roguelike.nethack/msg/c56143c3656980d2 RGRN post]
* A 6480-turn ascension by Rast: [http://groups.google.com/group/rec.games.roguelike.nethack/browse_thread/thread/0f71e860e51107f2/e845eae9ff100906 RGRN post]
* A 5456-turn ascension by theta: [http://groups.google.com/group/rec.games.roguelike.nethack/msg/37de2a42d9c55c78?dmode=so
* A 2508-turn NetHack 3.4.3 ascension by Maud: [https://s3.amazonaws.com/altorg/dumplog/Maud/1261121547.nh343.txt NAO dumplog]
* A 2495-turn NetHack 3.4.3 ascension by Maud: [https://s3.amazonaws.com/altorg/dumplog/Maud/1264199947.nh343.txt NAO dumplog] 
* A 2318-turn NetHack 3.4.3 ascension by Maud: [https://s3.amazonaws.com/altorg/dumplog/Maud/1265176770.nh343.txt NAO dumplog], [http://alt.org/nethack/userdata/Maud/ttyrec/2010-02-03.05:59:29.ttyrec ttyrec]
* A 2185-turn ascension by nht: [http://groups.google.com/group/rec.games.roguelike.nethack/msg/4350f478cde9fd7d RGRN post] [http://alt.org/nethack/userdata/n/nht/ttyrec/2010-02-24.2185_turn_ascension_combined.ttyrec.bz2 ttyrec]
* A 2596-turn bones-free NetHack 3.4.3 ascension by Maud: [https://s3.amazonaws.com/altorg/dumplog/Maud/1310647999.nh343.txt NAO dumplog], [https://s3.amazonaws.com/altorg/ttyrec/Maud/2011-07-14.12:53:18.ttyrec.bz2 ttyrec] -->
* A 2391-turn bones-free NetHack 3.4.3 ascension by Maud: [https://s3.amazonaws.com/altorg/dumplog/Maud/1330884013.nh343.txt NAO dumplog], [https://s3.amazonaws.com/altorg/ttyrec/Maud/2012-03-04.18:00:12.ttyrec.bz2 ttyrec]
* A 2251-turn bones-free NetHack 3.4.3 ascension by Maud: [https://s3.amazonaws.com/altorg/dumplog/Maud/1444567290.nh343.txt NAO dumplog], [https://s3.amazonaws.com/altorg/ttyrec/Maud/2015-10-11.12:41:29.ttyrec.bz2 ttyrec part1] [https://s3.amazonaws.com/altorg/ttyrec/Maud/2015-10-11.16:36:45.ttyrec.bz2 part2] [https://s3.amazonaws.com/altorg/ttyrec/Maud/2015-10-11.16:37:15.ttyrec.bz2 part3]
* A 2135-turn NetHack 3.4.3 ascension by Maud: [https://s3.amazonaws.com/altorg/dumplog/Maud/1291595692.nh343.txt NAO dumplog]
* A 2130-turn NetHack 3.4.3 ascension by SpeedyCat7: [http://www.reddit.com/r/nethack/comments/1kzl4o/i_set_the_nethack_speed_record_ascension_in_2130/ reddit post] [http://alt.org/nethack/userdata/SpeedyCat7/dumplog/1376970440.nh343.txt NAO dumplog]
* A 235-turn AceHack ascension by nht: [http://www.reddit.com/r/nethack/comments/27hvfj/notes_for_a_235_turn_78_minute_acehack_ascension/ reddit post] [http://acehack.de/notable/nht-235/nht.1401737968 dumplog] [http://acehack.de/notable/nht-235/nht.ttyrec.bz2 ttyrec]
https://nethackscoreboard.org/players/a/aoei.nh.html

====Bones-free ascensions====
* A 5838-turn bones-free NetHack 3.7.0 ascension by aoei: [https://eu.hardfought.org/userdata/S/StellaSchnella/nethack/dumplog/1611604496.nh.txt dumplog]
* A 4841-turn bones-free UnNetHack ascension by nht: [http://www.reddit.com/r/nethack/comments/1u33ps/yavp_unnethack_tourist_4841_turns/ reddit post] [https://ascension.run/history/unn/users/unnht/dumps/unnht.1388416005.txt.html dumplog]
* A 2816-turn bones-free NetHack 3.4.3 ascension by Maud: [https://s3.amazonaws.com/altorg/dumplog/Maud/1262899446.nh343.txt NAO dumplog]
* A 2607-turn bones-free NetHack 3.4.3 ascension by Maud: [https://s3.amazonaws.com/altorg/dumplog/Maud/1296718140.nh343.txt NAO dumplog]
* A 1015-turn bones-free set seed UnNetHack ascension by nht: [https://ascension.run/history/unn/users/unnht/dumps/eu/unnht.1435666057.txt.html dumplog], [https://ascension.run/history/unn/users/unnht/ttyrecs/eu/2015-06-30.08%3a10%3a09.ttyrec.bz2 ttyrec part1], [https://ascension.run/history/unn/users/unnht/ttyrecs/eu/2015-06-30.08%3a30%3a47.ttyrec.bz2 part2], [[User:Nht/Junethack15_Set_Seed_Speedrun_Notes|Notes]]<br>Reddit posts: [https://www.reddit.com/r/nethack/comments/31ifi4/prelude_to_an_unnethack_speedrun_set_seed_gametime/ Prelude to an UnNetHack speedrun (set seed, gametime)], [https://www.reddit.com/r/nethack/comments/3355z6/363_turn_16_second_set_seed_unnethack_win/ 363 turn, 16 second set seed UnNetHack win]

===Real-time speed ascensions===
* A 2:48:30 ascension by Eidolos: [http://groups.google.com/group/rec.games.roguelike.nethack/msg/d37377cc4085533d?pli=1 RGRN post]
* A 1:16 ascension by Sayo: [https://nethackscoreboard.org/neu_dumplogs/nhdump-Sayo-1297205510.txt NEU dumplog]
* A 1:03 ascension by Sayo: [https://nethackscoreboard.org/neu_dumplogs/nhdump-Sayo-1322174697.txt NEU dumplog] [http://sartak.org/nh/2011-11-24.21-41-24-1h-3min-realtime-speedrun-sayo-neu.ttyrec.bz2 ttyrec]
* A 0:59 ascension of NetHack 3.7.0 by [[User:Luxidream|Luxidream]]: [https://www.hardfought.org/userdata/L/Luxidream/nethack/dumplog/1608704209.nh.html dumplog] [https://www.hardfought.org/userdata/L/Luxidream/nethack/ttyrec/2020-12-23.06:16:49.ttyrec.gz ttyrec] [https://www.youtube.com/watch?v=N4NofpJAS2Q youtube VoD]
* A 0:49 ascension of NetHack 3.7.0 by Luxidream: [https://www.hardfought.org/userdata/L/Luxidream/setseed/dumplog/1625208090.seed.html dumplog]

A collection of fast (real-time) ascensions from [[NAO]] and other servers, most in [[Ttyrec]] format and with logs of important in-game events, can also be found at [http://www.codehappy.net/nethacktheatre/fastgames.htm this page] on Codehappy.net.

{{featured}}
{{nethack-366|offset=1}}
[[Category:Untracked conducts]]}
&&%s&& %s Speedrunning {10138 2006-09-09T21:36:44Z {396 Jayt} Redirecting to [[Speed ascension]] #REDIRECT [[Speed ascension]]}
&&%s&& %s DOS {10143 2006-09-09T22:24:38Z {679 Ray Chason} Redirect to MS-DOS #REDIRECT [[MS-DOS]]}
&&%s&& %s Oracle {10157 2006-09-10T02:43:14Z {239 Eidolos} [[Oracle]] moved to [[The Oracle]] #REDIRECT [[The Oracle]]}
&&%s&& %s Very fast {144437 2022-02-09T21:19:55Z {4001483 Cathartes} Changed redirect target from [[Speed#Extrinsic speed (very fast)]] to [[Speed#Very fast]] #REDIRECT [[Speed#Very fast]]}
&&%s&& %s Speed system {10169 2006-09-10T03:18:16Z {712 SGrunt} #REDIRECT [[Speed]] #REDIRECT [[Speed]]}
&&%s&& %s Fast {143760 2021-12-01T04:05:09Z {4001483 Cathartes} Changed redirect target from [[Speed#Intrinsic speed (fast)]] to [[Speed#Fast]] #REDIRECT [[Speed#Fast]]}
&&%s&& %s Book of the Dead {150015 2023-02-19T18:09:18Z {4001483 Cathartes} /* Strategy */ shapeshifted vampires are neutral {{item
 |symbol=+
 |name=Book of the Dead
 |tile=[[image:papyrus spellbook.png]]
 |appearance=papyrus spellbook
 |image=[[Image:Papyrus_spellbook.png]]
 |cost=10000
 |weight=20
 |color=white
}}
The '''Book of the Dead''' is one of the three [[unique items]] needed for the [[invocation]] in ''[[NetHack]]''. It appears as a '''papyrus spellbook''' when unidentified.

==Generation==
The [[Wizard of Yendor]] is always generated with the Book of the Dead on his square in the [[Wizard's Tower]].

There is code that indicates the Book should always be generated [[cursed]] when given to a monster; since the Book is generated on the Wizard's square rather than directly in his inventory, this code is never actually executed.{{refsrc|src/makemon.c|1946|version=NetHack 3.6.6}}

==Effects==
The Book of the Dead's effects depend on whether you are standing on the [[vibrating square]], and reading the Book will [[auto-identify]] it in either case.{{refsrc|src/spell.c|204|version=NetHack 3.6.6}}{{refsrc|src/spell.c|213|version=NetHack 3.6.6}} It takes 2 actions to read, which is the minimum for all spellbooks - one to actually read, and the second where the check to see if you've finished is applied; the Book's source code data technically designates it as taking 0 actions to read. 

The Book of the Dead can be read even if you are [[blind]], to ensure those attempting the [[zen]] [[conduct]] can progress.

===Invocation===
If you read the Book of the Dead while performing the invocation and standing on the vibrating square, and you lack the [[Bell of Opening]] or the [[Candelabrum of Invocation]], or else any of the artifacts are cursed, nothing happens; depending on the circumstances, you will receive an additional message hinting at the source of the interference.{{refsrc|src/spell.c|221|version=NetHack 3.6.6|name=cursed_book}}{{refsrc|src/spell.c|226|version=NetHack 3.6.6|name=missing_items}}{{refsrc|src/spell.c|252|version=NetHack 3.6.6|name=arti_cursed}} If the Bell has not been rung recently enough, or the Candelabrum is not fully lit, you instead [[#Raising the dead|raise the dead]];{{refsrc|src/spell.c|267|version=NetHack 3.6.6|name=goto_raise_dead}}{{refsrc|src/spell.c|276|version=NetHack 3.6.6|name=raise_dead}} otherwise, if you have correctly prepared all the invocation items, you perform the [[invocation ritual]].

===Normal effects===
While not on the vibrating square, the Book of the Dead has the following effects based on [[beatitude]]:

* If the Book is blessed, [[alignment|coaligned]] [[undead]] will be [[tame]]d, while all other undead are either [[scared]] or become peaceful.{{refsrc|src/spell.c|293|version=NetHack 3.6.6|name=tamedead}}
* If the Book is uncursed, there is no effect and you get a random message.{{refsrc|src/spell.c|314|version=NetHack 3.6.6|name=no_effect}}
* If the Book is cursed, you [[#Raising the dead|raise the dead]].<ref name="goto_raise_dead"/><ref name="raise_dead"/>

===Raising the dead===
If you fail to prepare the invocation items, or read a cursed Book of the Dead when not on the vibrating square, you will raise the dead. This has the following effects:<ref name="raise_dead"/>

* A number of undead creatures will be created around you.
** If zombies can not be created, normal monsters will be summoned instead.
** There is a 1/3 chance of summoning a hostile [[master lich]], or a [[nalfeshnee]] if master liches cannot be created.
* Corpses in your main inventory will be revived and eggs are rejuvenated, as with a [[wand of undead turning]].
* The level becomes a [[graveyard]] level, meaning that undead are less likely to leave corpses.

==Strategy==
Raising the dead is a viable strategy to [[Farming#Wraith farming|farm wraith corpses]].

Note that for taming undead with the blessed Book, [[skeleton]]s, [[shade]]s, and shapeshifted [[vampire]]s (in [[fog cloud]], [[vampire bat]], or [[wolf]] form) are the only non-chaotic undead.

==History==
In [[NetHack 3.4.3]], earlier versions and some variants based on these versions, the Book of the Dead could actually be destroyed by stepping into [[lava]] without [[fire resistance]] and wearing an [[amulet of life saving]] while carrying it. This was fixed in [[NetHack 3.6.0]].<ref>{{commit|9cad30853620fcf583e904a143a4105a8faef1e0|Commit 9cad308}}</ref><ref>{{commit|72c2ae233d35076adece2e8d02a7f8839e4a5aa8|Commit 72c2ae2}}</ref>

==Origin==
{{wikipedia|Book of the Dead}}
{{wikipedia|Bell, book, and candle}}
The motif of "Bell, Book and Candle" originated as a Catholic ritual of excommunication by anathema, although some media portrays it in connection with exorcism (e.g., the Terry Pratchett/Neil Gaiman novel ''Good Omens'').

The "Book of the Dead" is the name given to a loose collection of ancient Egyptian funerary texts - they were generally written in hieroglyphic or hieratic script on a papyrus scroll, and were often illustrated with vignettes depicting the deceased and their journey into the afterlife. They were used from the beginning of the New Kingdom (around 1550 BCE) to around 50 BCE. The original Egyptian name for the text is translated as ''"Book of Coming Forth by Day"'' or ''"Book of Emerging Forth into the Light"''; Karl Richard Lepsius gave them the German name ''Todtenbuch'' (modern spelling ''Totenbuch''), translated to English as Book of the Dead. They have a [http://lccn.loc.gov/60012165 Library of Congress entry] in the United States.

The texts were written by many priests over a period of about 1,000 years, and consist of a number of magic spells intended to assist a dead person's journey through the Duat, or underworld, and into the afterlife. There was no "canon" to these texts, and so they vary considerably in their illustration; some copies seem to have been commissioned specifically to reflect the spells the buyer thought most vital in their future progression to the afterlife. They were placed in the coffin or burial chamber of the deceased, as part of a tradition of funerary texts - this includes the earlier Pyramid Texts and Coffin Texts, which were painted onto objects, and some of the spells included were drawn from these older works, while others were composed later in Egyptian history.

==Messages==
{{message|The runes appear scrambled.  You can't read them!|You read a cursed Book of the Dead while on the vibrating square.<ref name="cursed_book"/>}}
{{message|A chill runs down your spine.|You read the non-cursed Book of the Dead while on the vibrating square, but you are missing one of the other items, with the following two messages depending on the missing item(s):<ref name="missing_items"/>}}
{{message|You hear a faint chime...|You do not have the Bell of Opening.}}
{{message|Vlad's doppelganger is amused.|You do not have the Candelabrum of Invocation.}}
{{message|The invocation fails!<br>At least one of your artifacts is cursed...|You attempted the invocation, but one of the other artifacts is cursed.<ref name="arti_cursed"/>}}
{{message|You have a feeling that something is amiss...<br>You raised the dead!|You attempted the invocation and waited too long to read the Book after applying the other items.<ref name="goto_raise_dead"/>}}

{{message|Your ancestors are annoyed with you!<br>The headstones in the cemetery begin to move!<br>Oh my!  Your name appears in the book!|You read the uncursed Book of the Dead while not on the vibrating square, which has no effect.<ref name="no_effect"/>}}
{{message|You raised the dead!|You read the cursed Book of the Dead while not on the vibrating square.<ref name="raise_dead"/>}}

==Variants==
===SLASH'EM===
In [[SLASH'EM]], a cursed Book of the Dead can be much more useful if you know the command undead spell, as it allows you to call large amounts of undead to tame. Be careful with the master lich that may be summoned as well, though.

==Encyclopaedia entry==
{{encyclopedia|
Faustus: Come on Mephistopheles.  What shall we do?
Mephistopheles: Nay, I know not.  We shall be cursed with bell,
book, and candle.
Faustus: How?  Bell, book, and candle, candle, book, and bell,
Forward and backward, to curse Faustus to hell.
Anon you shall hear a hog grunt, a calf bleat, and an ass bray,
Because it is Saint Peter's holy day.
(Enter all the Friars to sing the dirge)
|[ Doctor Faustus and Other Plays, by Christopher Marlowe ]
}}

== References ==
<references/>
{{nethack-366}}
[[Category:Unique items]]
[[Category:Spellbooks]]}
&&%s&& %s Engraving {148479 2022-10-05T00:42:19Z {4001279 Umbire the Phantom} de-SLEX {{Keyboard commands}}
An '''engraving''' is any form of text written on the ground. Such text can be written ("engraved") with the command {{kbd|shift|e}}. This includes carving or burning [[ASCII|characters]] into the dungeon floor, writing on the floor with a writing instrument, and drawing in the dust with fingers, wands, etc. This can ostensibly be done by a player to record messages to themselves, and there are also random engravings left in the dungeon; however, the most common use of engraving is to write the name [[Elbereth]].

== Speed ==

Engraving techniques may be classed as fast (fingers, [[wand]], non-cursed [[athame]]{{refsrc|src/engrave.c|1059|nethack=3.6.0}}) or slow (other edged weapons,{{refsrc|src/engrave.c|1058|nethack=3.6.0}} hard gems,{{refsrc|src/engrave.c|1076|nethack=3.6.0}} gemstone rings{{refsrc|src/engrave.c|1076|nethack=3.6.0}}). A fast engraving method takes 1 game turn per 10 characters engraved; if you engrave fewer than 10 characters by a fast method, it is '''instantaneous''' (this distinction is explained in detail below); otherwise, it takes 1 game turn to write 10&ndash;19 characters, 2 game turns to write 20&ndash;29 characters, and so forth. A slow method takes 1 game turn per character.

A non-instantaneous engraving isn't done until after the turn(s) have passed. This is a concern for two reasons: first, while [[player]]s reading a [[spellbook]] or eating a [[food ration]] will stop when approached by hostile monsters, characters busy engraving will continue even when under attack; second, if you are trying to engrave [[Elbereth]], you are only protected once it is complete. So you can be killed while doing a non-instantaneous engraving (you will be described as "helpless" in the death reason). Until the new engraving is finished, the floor is considered completely blank&mdash;even if part of the message could be completed sooner, and even if there was an existing engraving on the floor before you started. So doing a non-instantaneous engraving obscures any existing engraving of [[Elbereth]] until the turns are complete.

There is therefore a lot of danger in doing a non-instantaneous engraving, so you almost never want to do a non-instantaneous engraving lasting more than 1 turn.

Furthermore, if you are [[very fast]] and you know that you will get two turns in a row, you might be able to safely do a non-instantaneous 1 turn engrave: 1 character slowly or up to 19 characters quickly.

Instantaneous engraving is much simpler and safer. It uses only one player turn (so you may get multiple instantaneous engraves per game turn, if fast or very fast, via the usual speed system). Your engraving takes immediate effect, like most other simple player commands; in other words, an instantaneous [[Elbereth]] is on the ground ''before'' the monsters take their next move. You aren't helpless, and any existing engraving on the ground is not obscured while you engrave.

{{upcoming|NetHack 3.7.0|Engraving is now an occupation and can be interrupted, for example, if you're attacked, you teleport away or the stylus is lost. The text is no longer written all at once; a partial engraving will remain if the process is interrupted.}}

== Quality ==

The engravings themselves may be classified as ''permanent'' (will not degrade), ''semi-permanent'' (will degrade slowly), or ''temporary'' (will degrade very quickly).

''Permanent'' engravings are burned into the floor with a [[wand of fire]] or [[wand of lightning]]. The wand of lightning can blind you if your eyes are not protected. (The blindness takes effect ''after'' the engraving is completed&mdash;you will not increase your risk of misengraving through blindness.) Permanent engravings will not erode from being stood on or walked over, but can be eliminated through techniques such as overwriting them with another wand of fire or lightning, erasing the engraving with a [[wand of cold]], or changing the engraving with a [[wand of polymorph]].

''Semi-permanent'' engravings are written with a charged [[magic marker]] or carved into the floor with an edged weapon, a hard gemstone, a ring containing a hard gemstone, or a [[wand of digging]]. Using a magic marker consumes one charge for every two characters written. Engraving with any weapon other than a non-cursed athame will make the weapon dull (reduce enchantment) to a minimum of &minus;3, at which point the weapon is too dull to engrave any more. (If it is not [[cursed]], an athame will engrave forever without dulling. This, and its speed, make it highly prized as an engraving tool.) The weapon ordinarily suffers a &minus;1 degradation for every second letter engraved, but a loophole in how this calculation is done can allow you to write longer messages by breaking the engraving job up into smaller parts: engraving three letters is still only a &minus;1 penalty, so it is possible to use a +0 weapon to engrave three letters, then add three more, and then another three, for a total of nine characters before the weapon is useless, rather than only seven if you had attempted to engrave all at once. This is especially important when engraving the eight-character word [[Elbereth]]. Semi-permanent engravings can erode over time as they are walked over or stood upon, but not nearly as quickly as will temporary (finger) engravings.

''Temporary'' "engravings" are made by drawing in the dust on the floor with your fingers by responding "-" when asked what to engrave with, or you can use another object such as a soft gemstone, or any wand other than fire, lightning, or digging (certain wands may have undesirable effects on the engraving itself, such as polymorphing it). This is fast, but subject to a {{frac|25}} chance of mis-engraving per letter, and any movement, such as fighting or throwing missiles, will damage the engraving. Even standing still on the engraving will eventually degrade it, as no one stands perfectly still. Temporary engravings can also be erased with a [[towel]]. Attempting to write in the dust while [[polymorph]]ed into a [[demon]] or [[vampire]] will instead ''scrawl in blood'', which shares properties with writings in the dust.

== Success probability ==

You are not guaranteed to engrave perfectly if you are impaired or writing in the dust. For each letter, you have a (cumulative) chance of messing up if you are [[blindness|blind]] ({{frac|11}}), [[Confusion|confused]] ({{frac|7}}), [[stun]]ned ({{frac|4}}), or [[Hallucination|hallucinating]] ({{frac|2}}). If you are writing in the dust (with fingers, a wand, a soft gem, etc.) or scrawling in blood, you have a {{frac|25}} chance of messing up each letter.{{refsrc|src/engrave.c|1028|nethack=3.6.0}} (When this happens, the letter is replaced by one chosen randomly from among the 94 printable non-space [[ASCII]] characters. Thus, there's a {{frac|94}} chance that the letter will be replaced by itself, and another {{frac|94}} chance that it will only change from lowercase to uppercase or vice versa.)

This is not usually much of a concern unless you are engraving "Elbereth", since an error there renders the word powerless. Attempting to [[Elbereth#Chances of engraving|write "Elbereth"]] in the dust only works about 72.65% of the time. If you can see, you can inspect your work with the "look" command, {{kbd|:}}.

== Durability ==

Temporary engravings are eroded by a number of actions. Upon each action, a specified number of characters is picked randomly and corrupted (possibly the same character multiple times). For instance, moving off of a square corrupts between 1 and 5 characters (but not jumping off or onto a square, or moving on to a square). The other actions which affect engravings are: melee combat (3 characters corrupted), throwing or firing (2), kicking (2), applying an axe to the ground (3), zapping a wand of striking or casting force bolt at the ground (2d4), and casting stone to flesh downwards (only affects engraving in stone). Normal spellcasting and wands do not erode engravings.

In addition to these actions, every turn, there is a small (1 in (40&nbsp;+ 3&nbsp;&times; Dexterity)) chance of eroding between 1 and 3 characters on the player's square.{{refsrc|src/allmain.c|323|nethack=3.6.0}} Monsters (including pets and steeds), unless sleeping or paralyzed, will erode 1 character in their square per turn. When riding, it is thus impossible to successfully write "Elbereth" in the dust if your steed is faster than you, and you should only rely on permanent engravings which your steed cannot trample.

Semi-permanent engravings only have at most one character corrupted per action. This means that at most two (one for the action, and the small chance each turn) characters will be corrupted per turn. The chance of combat or movement corrupting a character is about {{frac|13}}. More precisely, there's 1 chance in (1 + 50/(''n'' + 1)){{refsrc|src/engrave.c|296|nethack=3.6.0}} (where ''n'' is the number of characters that would have been corrupted, if the engraving were temporary) that a character will be corrupted, and the following table shows the resulting probability for various cases.

In certain cases associated with magic, even permanent engravings may be eroded; in these cases, there's a 50% chance of no erosion, and a 50% chance that the formula for semi-permanent engravings will be used to corrupt 0 or 1 characters.{{refsrc|src/engrave.c|294|nethack=3.6.0}} The magical cases are shown in '''bold''' in the table below.

{|class="prettytable"
!rowspan=2|Temporary
(characters corrupted)
!colspan=2|Semi-permanent
(chance of corrupting 1 character)
!rowspan=2|Action/Cause
|-
!Fraction
!Percent
|-
|1
|{{sfrac|26}}
|3.85%
|
*any monster spending a turn on an engraving, unless asleep or paralyzed{{refsrc|src/monmove.c|377|nethack=3.6.0}}
|-
|2
|{{sfrac|17}}
|5.88%
|
*kicking{{refsrc|src/dokick.c|881|nethack=3.6.0}}
*throwing{{refsrc|src/dothrow.c|86|nethack=3.6.0}}
*applying a [[polearm]]{{refsrc|src/apply.c|2879|nethack=3.6.0}}
|-
|3
|{{sfrac|13}}
|7.69%
|
*melee combat{{refsrc|src/uhitm.c|403|nethack=3.6.0}}
*digging down with an ax, unless digging on beartrap or land mine{{refsrc|src/dig.c|1164|nethack=3.6.0}}
|-
|d2
|{{sfrac|43|884}}
|4.86%
|
*applying a [[grappling hook]], if the hook targets a monster, or 50% chance otherwise{{refsrc|src/apply.c|3004|nethack=3.6.0}}
|-
|d3
|{{sfrac|77|1326}}
|5.81%
|
*standing on an engraving, chance of (1 in (40&nbsp;+ 3&nbsp;&times; Dexterity)) each turn{{refsrc|src/allmain.c|323|nethack=3.6.0}}
|-
|d5
|{{sfrac|16463|218790}}
|7.52%
|
*attempting to move off an engraving (whether successful or not, e.g. overloaded){{refsrc|src/hack.c|1215|nethack=3.6.0}}
|-
|2d4
|{{sfrac|2152991|19603584}}
|10.98%
|
*'''zapping force bolt/striking downward at any engraving'''{{refsrc|src/zap.c|2785|nethack=3.6.0}}
*'''zapping stone to flesh downward at engraved (not burned) engraving'''{{refsrc|src/zap.c|2780|nethack=3.6.0}}<br />(This is magical, but it doesn't matter since it will never happen to permanent engravings; possibly a bug.)
|}

== Preexisting engravings ==

Engravings are occasionally generated when a level is created. These fall into several categories:
* A [[closet]] containing a [[trap door]] will have "[[Vlad was here]]" engraved in dust outside the closet.
* A closet containing a [[vault]] teleporter or a level teleporter will have "[[ad aerarium]]" engraved in dust outside the closet.
* A [[shop]] whose door is locked will have "[[Closed for inventory]]" engraved in dust on the corridor outside the door.
* [[Graffiti]] containing a random message, somewhat degraded.
* Messages that appear on various [[special level]]s, such as the "X marks the spot" engravings on the [[Archeologist quest]].

== Additional notes ==

* [[Physical size|Tiny]] or [[body parts|handless]] monsters cannot engrave.{{refsrc|src/engrave.c|522|nethack=3.6.0}}
* The epitaphs on [[grave]]stones share these properties, for obvious reasons. They are permanent, but can be changed or extended with a hard gem or bladed weapon. This will summon a [[ghoul]]. Elbereth on gravestones is ignored to avoid abusing this, or naming yourself Elbereth to get a permanent Elbereth.
* Using a [[magic marker]] to engrave [[graffiti]] on the floor is generally seen as a waste of the magic marker, but is also the most common type of writing used for engravings that are randomly generated in the dungeon.
* "Burning" with a wand of {{of|wand|fire|or=1|lightning}} into ice will instead melt letters into the ice, which is like a semi-permanent engraving.
* Engraving may also be used to [[Wand#Engrave-identification|identify wands]].
* When you [[name]] an item, it is possible to get a message such as "While engraving your hand slips." The mechanics of engraving{{refsrc|src/engrave.c|460|nethack=3.6.0}} and naming{{refsrc|src/do_name.c|598|nethack=3.6.0}} are separate and quite different; the message is part of an internal mechanism to preserve the [[Naming artifacts|unique naming of artifacts]]. This is certainly a special kind of engraving, because it is absolutely permanent and requires no tool at all! It also doesn't break the illiterate conduct.
* Flammable items on the square are not damaged by burning with a wand of fire or lightning.
* Canceling the engrave prompt when using a charged wand will use up a turn and a charge. Canceling the prompt in any other situation, including an uncharged wand, will not use up a turn.

== Variants ==

=== xNetHack ===
In [[xNetHack]], engravings are marked on the dungeon map as {{white|~}}, with the glyph's color depending on the type of engraving. It can be changed with the <code>S_engraving</code> option.

== See also ==
* [[Elbereth]]
* [[Graffiti]]

== References ==
<references/>

{{nethack-360|offset=1}}
{{featured}}

[[Category:Commands]]}
&&%s&& %s Engrave {10174 2006-09-10T03:37:00Z {712 SGrunt} #REDIRECT [[Engraving]] #REDIRECT [[Engraving]]}
&&%s&& %s Category:Cloaks {12896 2006-10-01T03:17:40Z {467 Killian} Short intro sentence This category contains article about [[cloak]]s, a kind of [[armor]] worn above [[body armor]].

[[Category:Armor]]}
&&%s&& %s MC {12754 2006-09-29T16:54:51Z {396 Jayt} Redirecting to [[Magic cancellation]] #REDIRECT [[Magic cancellation]]}
&&%s&& %s Cloak of displacement {148781 2022-10-10T11:43:19Z {4001279 Umbire the Phantom} post-"other additions I was too sleepy to mention" tweak {{armor
  |top={{cloak top}}
  |name=cloak of displacement
  |appearance={{random appearance}}
  |slot=cloak
  |ac=1
  |special=<ul><li>[[magic cancellation|MC1]]</li><li>[[displacement]]</li></ul>
  |cost=50
  |weight=10
  |material=cloth
}}

The '''cloak of displacement''' is a [[cloak]] that appears in ''[[NetHack]]''. It is made of [[cloth]], and has a [[Randomized appearance|randomized appearance]]; the default one associated with it is a [[piece of cloth]].{{refsrc|src/objects.c|470|version=NetHack 3.6.6}}

==Generation==
All non-[[Elf (starting race)|elven]] [[Ranger]]s start the game with a +2 cloak of displacement; elven Rangers instead start with a +2 [[elven cloak]].<ref name="substitutions">{{function|u_init.c|Race-based substitutions for initial inventory}}</ref>{{refsrc|src/u_init.c|118|version=NetHack 3.6.6}}{{refsrc|src/u_init.c|211|version=NetHack 3.6.6}}

Most non-[[Monk (player monster)|monk]] [[player monster]]s on the [[Astral Plane]] have a 87.5% chance of receiving a random magical cloak in their [[Monster starting inventory|starting inventory]], and a further 12.5% chance of that cloak being a cloak of displacement - effectively a ~10.94% chance.{{refsrc|src/mplayer.c|157|version=NetHack 3.6.6}}{{refsrc|src/mplayer.c|207|version=NetHack 3.6.6}} For [[Priest (player monster)|priests]], there is a 75% chance the cloak will be made into a [[robe]] instead, reducing this effective chance to ~2.73%;{{refsrc|src/mplayer.c|217|version=NetHack 3.6.6}} [[Wizard (player monster)|Wizards]] have a {{frac|1|2}} chance of forcing a [[cloak of magic resistance]], resulting in a ~5.47% chance of one generating with a cloak of displacement.{{refsrc|src/mplayer.c|248|version=NetHack 3.6.6}}

==Description==
When worn, the cloak of displacement provides [[magic cancellation|MC1]] and [[displacement]]; putting on or taking off the cloak will [[auto-identify]] it if you can see yourself or are able to sense monsters, and you are not currently engulfed. The displacement will not affect hostile monsters if you are [[invisible]] and they cannot [[see invisible]].

==Strategy==
The cloak of displacement is the only source of the property in the game, and is a solid defensive item for misdirecting attacks from hostile monsters. In the early game, it is an especially solid tool for escaping fights, though it is somewhat outclassed by invisibility, which inflicts an additional -2 [[to-hit]] penalty and similarly causes monsters to attack squares where they think you are. In the long term, however, fewer monsters are immune to being fooled by displacement compared to the many later threats that can see invisible.

Players using a [[lance]] or any [[polearm]] as their main weapon may especially benefit from monsters wasting turns striking at their image while remaining within [[pounding]] range.

{{upcoming|3.7.0|The displacer beast is now an alternative source of displacement - the beast (and thus its polyform) has the property intrinsically, and eating its corpse grants temporary displacement.}}

==History==
The cloak of displacement is introduced in [[NetHack 3.0.0]]. From 3.0.0 to [[NetHack 3.4.3]], including many variants based on those versions, the cloak of displacement grants MC2 when worn; the messages associated with wearing or removing one are not added until [[NetHack 3.6.0]] and may not be present in a given variant of 3.4.3, though the cloak still auto-identifies when worn.

==Origin==
The cloak of displacement is an item that originates from ''[[Dungeons & Dragons]]''. It is a black leather cloak fashioned out of the hide of a [[displacer beast]] - the displacing effect comes from strands of sinew from the beasts' tentacles interwoven with the fabric that distorts and warps light that hit its surface. This causes the wearer to appear as if they were a slightly different location up to 6 in (0.15 m) away, offering protection from attacks - thos only works while the wearer is attuned and conscious, and being hit caused the cloak to lose its illusory abilities for a few seconds.

==Messages==
{{message|You feel that monsters have difficulty pinpointing your location.|You put on a cloak of displacement. The cloak is identified.}}
{{message|You feel that monsters no longer have difficulty pinpointing your location.|You removed a cloak of displacement. The cloak is identified.}}
{{message|<[[Foo]]> strikes at your <invisible> displaced image and misses you!|A monster attacked a spot where they believed you to be as a result of displacement; "invisible" is appended if you are invisible and the monster can see invisible.}}
{{message|<Foo> smiles <engagingly/seductively> at your <invisible> displaced image...|As above, but you were targeted with a seduction attack.}}
{{message|The invisible <foo> whispers at thin air.|A demon lord or prince attempted to demand a bribe from you, but was fooled by your displaced image - this will immediately turn them hostile.}}

==Variants==
Some variants make it possible for monsters to gain displacement from wearing this cloak; shimmering dragons and their scales (and scale mail) may also provide an additional source of displacement for players.

===SLASH'EM===
In [[SLASH'EM]], the cloak of displacement grants MC2. A cloak of displacement can be created by [[upgrading]] an elven cloak or [[oilskin cloak]]. [[Deluder]] is an [[artifact]] cloak of displacement that also doubles as a [[luck item]] and confers [[stealth]], and is the guaranteed second [[sacrifice gift]] for [[Wizard]]s.

===GruntHack===
[[GruntHack]] implements proper displacement for monsters, making it possible for them to obtain the property by wearing the cloak.

===UnNetHack===
In [[UnNetHack]], [[Sokoban (UnNetHack)|Sokoban]] offers a cloak as one of the three types of prizes, which has a 50% chance of being a cloak of displacement.

===dNetHack===
In [[dNetHack]], [[The Mantle of Heaven]] and [[The Vestment of Hell]] are artifact cloaks that always appear as ornamental copes, making it possible for them to be cloaks of displacement.

===FIQHack===
In [[FIQHack]], the cloak of displacement gives MC3 and monsters can gain displacement from wearing it; monster displacement functions somewhat similar to GruntHack, though with various differences (e.g., the displaced images of monsters detected via telepathy or monster detection do not appear).

===EvilHack===
In [[EvilHack]], monsters can gain displacement by wearing this cloak.

==References==
<references/>
{{nethack-366}}
[[Category:Cloaks]]}
&&%s&& %s Cloth {131019 2020-01-18T04:53:09Z {4001279 Umbire the Phantom}  '''Cloth''' is a [[material]] in ''NetHack''. Some [[helm]]s, all [[shirt]]s, most [[cloak]]s, and some [[tool]]s are made of cloth.

Cloth items are vulnerable to [[erosion|burning]] and [[rotting]].{{refsrc|mkobj.c|1068}}

== List of cloth items ==

=== Helms ===
* [[cornuthaum]]
* [[dunce cap]]
* [[fedora]]

=== Shirts ===
* [[Hawaiian shirt]]
* [[T-shirt]]

=== Cloaks ===
* [[alchemy smock]]
* [[cloak of displacement]]
* [[cloak of invisibility]]
* [[cloak of magic resistance]]
* [[cloak of protection]]
* [[dwarvish cloak]]
* [[elven cloak]]
* [[mummy wrapping]]
* [[oilskin cloak]]
* [[orcish cloak]]
* [[robe]]

=== Tools ===
* [[bag of holding]]
* [[bag of tricks]]
* [[blindfold]]
* [[oilskin sack]]
* [[sack]]
* [[towel]]

== References ==
<references/>

[[Category:Materials]]
{{nethack-364}}}
&&%s&& %s Lev comp {81044 2012-10-18T03:45:09Z {4000180 Bcode} {{DISPLAYTITLE:lev_comp}} {{DISPLAYTITLE:lev_comp}}
'''lev_comp''' is the NetHack special level compiler. It turns the text-format .des-files in the dat-dir into binary .lev-files which will be loaded by NetHack when making the [[special level]]s.

To compile a .des-file into a .lev-file you run the lev_comp executable with the lev-files given as parameters, and lev_comp will create the .lev-files in the directory where you ran it. Usually you want to run it in the dat-directory where the lev-files are. For example, on linux, the following command run from the dat-directory will compile all levels:
 ../util/lev_comp *.des

The [[des-file format]] is actually not a programming language, as NetHack always executes the different commands in the same order, eg. [[trap]]s are created before [[monster]]s, which are created before [[object]]s, even if they're in a different order in the des-file.

[[Category:Annotations]]}
&&%s&& %s Des-file format {138948 2021-04-12T15:57:20Z {4000867 K2} /* OBJECT */ provide example for specific egg types {{DISPLAYTITLE:des-file format}}
The '''des-file format''' is the language which is used to describe the [[special level]]s for NetHack. It is compiled into a binary file by [[lev_comp]].

It is not a ''real'' programming language: there is no flow control, and the order in which different NetHack features are created is fixed.

There are two types of levels you can create: mazes and rooms. For {{sa|MAZE-type levels}} you "draw" one or more maps with ASCII characters and then describe the monsters, objects and so on that are in the map (example: [[Bigroom.des]]). For {{sa|ROOM-type levels}}, you describe rooms and their contents (example: [[Oracle.des]]). The maze-levels are easier to make and understand, and room-type levels do not offer as much control over the level.

[[lev_comp]] will create a .lev-file for each MAZE and LEVEL definition in the file. These .lev-files will be loaded into NetHack to make the special levels. The .lev-files NetHack loads are actually defined in [[Dungeon.def format|dungeon.def]].

This page is in the process of being updated to Nethack 3.6, and it should not be assumed that syntax in earlier versions is the same as in 3.6. For a complete guide on des files in 3.4.3, see [[Des-file format (NetHack 3.4.3)]].

[[UnNetHack]] uses a somewhat different [[des-file format (UnNetHack)|format]].

{{Float right|__TOC__}}

==Language syntax==
=== Comments ===
All lines beginning with <tt>#</tt> are comments and are ignored by the level compiler, except between {{sa|MAP}} and [[#MAP|ENDMAP]].

Example:
 # This is a comment.

=== Types ===
There are many data types used in des files. Some are relatively simple, such as characters, strings, and numbers. More complex ones include:
{|class="wikitable"
! Type
! Description
! Example
|-
|coord
|A coordinate pair, that is, a pair of numbers (x,y) representing a location on the last defined MAP or on the whole level if no MAP is defined, where (0,0) represents the point in the upper left corner. By convention, coordinates less than 10 have a leading 0, so that all coordinates are two digits, but this is not required.
Also, using ''rndcoord'' on any terrain selection (see below) will select one pair of coordinates at random from that selection and thus resolves to a single coord.
|(70,06)
|-
|math expression
|Fairly intuitive. Supported math operators are addition, subtraction, multiplication, division, and modulo division. Must resolve to an integer. Parentheses are also supported.
|(3 + 5) / (2 * 4)
|-
|dice notation
|Represents a roll of an arbitrary amount of arbitrary-sided dice, in the format ''XdY'' (roll X dice with Y sides and total them). Resolves to an integer and can be used in math expressions.
|4d6
|-
|comparison statement
|A percentage or math-based comparison that can be used to evaluate whether an IF block will be processed. Brackets are required.
|[33%]
[$variable < 10]
|-
|region
|A rectangular region of the level, expressed with the x and y coordinates of its upper left and lower right corners, respective to the most recently defined MAP. A variation is a ''levregion'', which is the same thing except that the coordinates are absolute on the level irrespective of any MAPs.
|(03,10,64,10)
levregion(10,18,21,25)
|-
|mapchar
|One of the {{sa|map characters}}, or a pair of that with a light state.
|'T'
('.',lit)
|-
|monster
|Either a single character representing a monster class (producing a random monster from that class), a string giving the name of a specific type of monster, or both  as a parenthetical pair.
|'F'
"lichen"

('F',"lichen")
|-
|object
|Either a single character representing an object class (producing a random object from that class), a string giving the name of a specific type of object, or both as a parenthetical pair.
|'('
"tin opener"

('(',"tin opener")
|-
|selection
|One, or a combination of multiple, {{sa|terrain selections}} (see below), representing an area of the level that is not necessarily rectangular. Frequently, rndcoord is used on a selection to pick a pair of coordinates in it at random.
|rect (10,10,20,20) & line (50,50),(60,50) & (61,61)
|-
|array
|An ordered list which can contain many of a single data type (any of the above, as well as the primitives). 
|{ (43,11), (34,11), (23,12), (45,06) }
|}

=== Variables ===
You can define variables, which must begin with a <tt>$</tt> sign. The name of the variable can contain only uppercase and lowercase letters and underscores. Variables must be assigned to something on the first line that they appear; they can then be used multiple times later.

Examples:
 # select and place exactly one of these four specific monsters at (10,18)
 # SHUFFLE can't be used because it would error if you tried to create for instance ('A',"minotaur")
 $mon_letters = { 'A', 'L', 'V', 'H' }
 $mon_names = { "Archon", "arch-lich", "vampire lord", "minotaur" }
 $mon_index = 1d4 - 1
 MONSTER:($mon_letters[$mon_index],$mon_names[$mon_index]),(10,18)

Various types of variables require their type to be declared when set, with a colon:
 $path = selection: randline (34,05),(43,05),10
 $enemy = monster: ('X',"xorn")
 $treasure = object: '/'
 $tree = terrain: 'T'

=== Shorthand for conditionals ===
If there happens to be only one statement that will either execute or not based on a condition, a shorthand is to put the conditional at the beginning of the line followed by a <tt>:</tt>, and then the rest of the statement. 

Example:
 [45%]: MONSTER:"xorn",random

However, if two or more statements need to be processed from the same condition, it's better to put them in an IF block.

=== Terrain selections ===
Many complicated shapes can be generated with terrain selections, and these shapes can even be combined with each other. The easiest way to think of them is as a set of points. These are the available definitions for terrain selections:

{|class="wikitable"
! Definition
! Explanation
! Example
|-
|''coord''
|Just a single point, one pair of coordinates.
|<tt>(44,12)</tt>
|-
|rect ''region''
|An unfilled rectangle, containing just the edges and none of the interior points.
|<tt>rect (20,13,40,15)</tt>
|-
|fillrect ''region''
|A filled rectangle containing the edges and all of the interior points.
|<tt>fillrect (20,13,40,15)</tt>
